<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UDAAN-X - Empowerment, Recovery & Wellness Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Cormorant+Garamond:wght@300;400;500;600&family=Lora:wght@400;500;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5ebe0;
            color: #333;
            overflow-x: hidden;
        }

        header {
            background: #f9f5f0;
            color: #5d4e37;
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(93, 78, 55, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            cursor: pointer;
        }

        .logo img {
            height: 50px;
            width: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #8b7355;
        }

        .logo-main {
            font-size: 1.8rem;
            line-height: 1;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            letter-spacing: 1px;
            color: #5d4e37;
        }

        .logo-sub {
            font-size: 0.7rem;
            font-weight: normal;
            color: #8b7355;
            font-family: 'Lora', serif;
            margin-left: 0.3rem;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #5d4e37;
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .nav-links a:hover {
            opacity: 0.7;
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .language-selector {
            position: relative;
            margin-right: 1rem;
        }

        .language-btn {
            background: transparent;
            color: #5d4e37;
            border: 2px solid #8b7355;
            padding: 0.6rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Lora', serif;
            font-weight: 500;
        }

        .language-btn:hover {
            background: #8b7355;
            color: white;
        }

        .language-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #d4cec7;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 0.5rem;
            min-width: 200px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1001;
        }

        .language-dropdown.show {
            display: block;
        }

        .language-option {
            padding: 0.8rem 1rem;
            cursor: pointer;
            transition: background 0.2s;
            color: #2c2c2c;
            font-family: 'Lora', serif;
        }

        .language-option:hover {
            background: #f5f3f0;
        }

        .language-option.active {
            background: #e8dcc7;
            font-weight: 600;
        }

        .goog-te-banner-frame,
        .goog-te-balloon-frame,
        .goog-logo-link,
        .goog-te-gadget {
            display: none !important;
        }

        body {
            top: 0 !important;
        }

        #google_translate_element {
            position: fixed;
            bottom: 10px;
            right: 10px;
            z-index: 999;
            background: white;
            padding: 5px;
            border-radius: 5px;
            opacity: 0.3;
        }

        #google_translate_element:hover {
            opacity: 1;
        }

        .skiptranslate {
            display: none;
        }

        .login-btn,
        .signup-btn {
            padding: 0.6rem 1.5rem;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-family: 'Lora', serif;
        }

        .login-btn {
            background: transparent;
            color: #5d4e37;
            border: 2px solid #8b7355;
        }

        .login-btn:hover {
            background: #8b7355;
            color: white;
        }

        .signup-btn {
            background: #8b7355;
            color: white;
            border: 2px solid #8b7355;
        }

        .signup-btn:hover {
            background: #6d5a44;
            border-color: #6d5a44;
        }

        .hero {
            margin-top: 70px;
            padding: 4rem 2rem;
            background: #e8dcc7;
            color: #5d4e37;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-family: 'Playfair Display', serif;
            color: #5d4e37;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 1rem;
            line-height: 1.6;
            color: #6d5a44;
            font-family: 'Lora', serif;
        }

        .cta-button {
            background: #8b7355;
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 1rem;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(93, 78, 55, 0.3);
            background: #6d5a44;
        }

        .modules {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .modules h2 {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 3rem;
            color: #2c2c2c;
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .module-grid {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .module-card {
            background: #f5f3f0;
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #d4cec7;
        }

        .module-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .module-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
        }

        .module-card h3 {
            color: #2c2c2c;
            margin-bottom: 1rem;
            font-size: 1.8rem;
            font-family: 'Cormorant Garamond', serif;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .module-card p {
            color: #666;
            line-height: 1.8;
            font-family: 'Lora', serif;
            font-size: 1rem;
        }

        .stress-section {
            padding: 4rem 2rem;
            background: #f5f3f0;
        }

        .stress-container {
            max-width: 800px;
            margin: 0 auto;
            background: #d4cec7;
            padding: 3rem;
            border-radius: 20px;
            color: #2c2c2c;
        }

        .stress-container h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
            color: #2c2c2c;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .question-box {
            background: rgba(255, 255, 255, 0.5);
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
        }

        .question-box h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: #2c2c2c;
            font-family: 'Cormorant Garamond', serif;
            font-weight: 500;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .option-btn {
            background: white;
            color: #5d4e37;
            padding: 1rem;
            border: 1px solid #e8dcc7;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-align: left;
            font-family: 'Lora', serif;
        }

        .option-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(93, 78, 55, 0.15);
            background: #f9f5f0;
        }

        .coming-soon-section {
            padding: 4rem 2rem;
            background: #d4cec7;
        }

        .coming-soon-box {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            background: rgba(255, 255, 255, 0.5);
            padding: 4rem 2rem;
            border-radius: 20px;
            border: 2px dashed #2c2c2c;
        }

        .coming-soon-box h3 {
            font-size: 3rem;
            color: #2c2c2c;
            font-family: 'Playfair Display', serif;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .coming-soon-box p {
            font-size: 1.2rem;
            color: #4a4a4a;
            font-family: 'Lora', serif;
        }

        footer {
            background: #5d4e37;
            color: white;
            padding: 2rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
        }

        .footer-section h3 {
            font-family: 'Playfair Display', serif;
            margin-bottom: 1rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #8b7355;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            line-height: 1;
        }

        .modal-content h2 {
            color: #5d4e37;
            margin-bottom: 1.5rem;
            font-family: 'Playfair Display', serif;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #2c2c2c;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #d4cec7;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Lora', serif;
        }

        .submit-btn {
            width: 100%;
            background: #8b7355;
            color: white;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #6d5a44;
        }

        .message {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .success {
            background: #d4edda;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
        }

        .hidden {
            display: none !important;
        }

        .password-wrapper {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 1.2rem;
            color: #666;
            user-select: none;
        }

        .menu-grid {
            display: grid;
            gap: 1.5rem;
            max-width: 600px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .menu-btn {
            background: #f5f3f0;
            padding: 1.5rem;
            border: 1px solid #d4cec7;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            text-align: left;
            transition: all 0.3s;
            color: #2c2c2c;
        }

        .menu-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .page-container {
            min-height: calc(100vh - 70px);
            padding-top: 70px;
        }

        .page-title {
            text-align: center;
            font-size: 2.5rem;
            color: #5d4e37;
            font-family: 'Playfair Display', serif;
            margin: 2rem 0;
            font-weight: 600;
        }

        .post-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .action-btn {
            background: #8b7355;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-top: 0.5rem;
        }

        .action-btn:hover {
            background: #6d5a44;
        }

        .back-btn {
            max-width: 200px;
            margin: 2rem auto;
            display: block;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .nav-links {
                display: none;
            }

            .modules h2 {
                font-size: 2rem;
            }


        }

        /* Animated Auth Widget */
        .auth-widget {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 9998;
        }

        .auth-trigger-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8B7355, #A89078);
            border: 3px solid #5d4e37;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            transition: all 0.3s;
        }

        .auth-trigger-btn:hover {
            transform: scale(1.1);
        }

        .animated-auth-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .animated-auth-container.active {
            display: flex !important;
        }

        .auth-box-container {
            position: relative;
            width: 750px;
            height: 450px;
            background: linear-gradient(135deg, #8B7355, #A89078);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .auth-form-box {
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px;
            background: #2c2c2c;
            transition: transform 0.8s ease-in-out;
            overflow-y: auto;
        }

        .auth-form-box::-webkit-scrollbar {
            width: 6px;
        }

        .auth-form-box::-webkit-scrollbar-thumb {
            background: #8B7355;
            border-radius: 10px;
        }

        .login-box {
            left: 0;
        }

        .register-box {
            right: 0;
            transform: translateX(120%);
        }

        .auth-box-container.active .login-box {
            transform: translateX(-120%);
        }

        .auth-box-container.active .register-box {
            transform: translateX(0);
        }

        .auth-form-box h2 {
            color: #fff;
            font-size: 26px;
            margin-bottom: 20px;
            font-family: 'Playfair Display', serif;
        }

        .auth-input-box {
            position: relative;
            margin-bottom: 15px;
        }

        .auth-input-box input,
        .auth-input-box select {
            width: 100%;
            padding: 10px 35px 10px 10px;
            background: transparent;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.5);
            color: #fff;
            font-size: 15px;
            outline: none;
        }

        .auth-input-box input:focus,
        .auth-input-box select:focus {
            border-bottom-color: #A89078;
        }

        .auth-input-box input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .auth-input-box select {
            appearance: none;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.6);
        }

        .auth-input-box select:focus {
            color: #fff;
        }

        .auth-input-box select option {
            background: #2c2c2c;
            color: #fff;
        }

        .auth-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
        }

        .auth-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #8B7355, #A89078);
            border: none;
            border-radius: 25px;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 115, 85, 0.4);
        }

        .auth-toggle-text {
            margin-top: 15px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            text-align: center;
        }

        .auth-toggle-text a {
            color: #A89078;
            cursor: pointer;
            font-weight: bold;
        }

        .auth-toggle-text a:hover {
            text-decoration: underline;
        }

        .auth-welcome-box {
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            color: #fff;
            transition: transform 0.8s ease-in-out;
            z-index: 100;
        }

        .login-welcome {
            right: 0;
        }

        .register-welcome {
            left: 0;
            transform: translateX(-120%);
        }

        .auth-box-container.active .login-welcome {
            transform: translateX(120%);
        }

        .auth-box-container.active .register-welcome {
            transform: translateX(0);
        }

        .auth-welcome-box h1 {
            font-size: 32px;
            margin-bottom: 15px;
            font-family: 'Playfair Display', serif;
            text-align: center;
        }

        .auth-welcome-box p {
            font-size: 15px;
            line-height: 1.6;
            text-align: center;
        }

        .auth-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #8B7355;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            z-index: 1001;
            line-height: 1;
        }

        .auth-close-btn:hover {
            background: #6d5a44;
        }

        @media (max-width: 768px) {
            .auth-box-container {
                width: 95%;
                height: 85vh;
            }

            .auth-form-box {
                width: 100%;
                padding: 25px;
            }

            .auth-welcome-box {
                display: none;
            }
        }
    </style>
</head>

<body>
    <header>
    <nav>
        <div class="logo" onclick="showHome()">
            <img src="https://i.ibb.co/xKrTZzV7/logo.png" alt="UDAAN-X Logo">
            <div>
                <span class="logo-main">UDAAN-X</span>
                <span class="logo-sub">Empowerment Platform</span>
            </div>
        </div>
        <ul class="nav-links">
            <li><a onclick="showHome()">Home</a></li>
            <li><a onclick="scrollToModules()">Services</a></li>
            <li><a onclick="openModule('stress')">Stress Help</a></li>
            <li><a onclick="scrollToDownload()">Download</a></li>
            <li><a onclick="scrollToContact()">Contact</a></li>
        </ul>
    </nav>
</header>
            <div class="auth-buttons" id="authButtons">
                <div class="language-selector">
                    <button class="language-btn" onmouseenter="toggleLanguageDropdown()">
                        <span>üåê</span>
                        <span id="currentLanguage">English</span>
                    </button>
                    <div class="language-dropdown" id="languageDropdown">
                        <div class="language-option active" onclick="changeLanguage('en', 'English')">English</div>
                        <div class="language-option" onclick="changeLanguage('hi', '‡§π‡§ø‡§Ç‡§¶‡•Ä')">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</div>
                        <div class="language-option" onclick="changeLanguage('bn', '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ')">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</div>
                        <div class="language-option" onclick="changeLanguage('te', '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</div>
                        <div class="language-option" onclick="changeLanguage('mr', '‡§Æ‡§∞‡§æ‡§†‡•Ä')">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</div>
                        <div class="language-option" onclick="changeLanguage('ta', '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç')">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</div>
                        <div class="language-option" onclick="changeLanguage('gu', '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä')">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</div>
                        <div class="language-option" onclick="changeLanguage('kn', '‡≤ï‡≤®‡≥ç‡≤®‡≤°')">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</div>
                        <div class="language-option" onclick="changeLanguage('ml', '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç')">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</div>
                        <div class="language-option" onclick="changeLanguage('pa', '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä')">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</div>
                        <div class="language-option" onclick="changeLanguage('or', '‡¨ì‡¨°‡¨º‡¨ø‡¨Ü')">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</div>
                        <div class="language-option" onclick="changeLanguage('as', '‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ')">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ (Assamese)</div>
                        <div class="language-option" onclick="changeLanguage('ur', 'ÿßÿ±ÿØŸà')">ÿßÿ±ÿØŸà (Urdu)</div>
                    </div>
                </div>
                
            </div>
        </nav>
    </header>

    <!-- HOME PAGE -->
    <div id="homePage" class="page-container">
        <section class="hero">
            <h1>UDAAN-X</h1>
            <p>Empowerment, Recovery & Wellness Platform</p>
            <p>Supporting women, rural communities, and individuals on their journey to mental wellness and recovery</p>
            <button class="cta-button" onclick="scrollToModules()">Explore Our Modules</button>
        </section>

        <section class="modules" id="modulesSection">
            <h2>Our Support Modules</h2>
            <div class="module-grid">
                <div class="module-card" onclick="openModule('voiceher')">
                    <div class="module-icon">üó£Ô∏è</div>
                    <h3>Voice Her</h3>
                    <p>Women's voice, safety, and empowerment platform</p>
                </div>

                <div class="module-card" onclick="openModule('saheli')">
                    <div class="module-icon">ü§ù</div>
                    <h3>Saheli Connect</h3>
                    <p>Community support and connection network</p>
                </div>

                <div class="module-card" onclick="openModule('grameen')">
                    <div class="module-icon">üåæ</div>
                    <h3>Grameen Saathi</h3>
                    <p>Rural outreach and awareness programs</p>
                </div>

                <div class="module-card" onclick="openModule('addiction')">
                    <div class="module-icon">üíö</div>
                    <h3>Addiction Help</h3>
                    <p>Recovery and mental wellness support</p>
                </div>

                <div class="module-card" onclick="openModule('stress')">
                    <div class="module-icon">üßò</div>
                    <h3>Stress Management</h3>
                    <p>Personalized stress relief and coping strategies</p>
                </div>
                
            </div>
        </section>

        <section class="stress-section hidden" id="stressSection">
            <div class="stress-container">
                <h2>Stress Management System</h2>
                <div class="question-box">
                    <h3>How are you feeling right now?</h3>
                    <div class="options">
                        <button class="option-btn" onclick="showSuggestion('low')">
                            I feel very low and tired
                        </button>
                        <button class="option-btn" onclick="showSuggestion('hopeless')">
                            I feel hopeless about the future
                        </button>
                        <button class="option-btn" onclick="showSuggestion('stressed')">
                            I feel stressed and cannot focus
                        </button>
                        <button class="option-btn" onclick="showSuggestion('isolated')">
                            I feel like I don't want to talk to anyone
                        </button>
                        <button class="option-btn" onclick="showSuggestion('anxious')">
                            I feel constantly anxious or worried
                        </button>
                        <button class="option-btn" onclick="showSuggestion('overwhelmed')">
                            I feel overwhelmed by daily tasks
                        </button>
                        <button class="option-btn" onclick="showSuggestion('angry')">
                            I feel irritable or angry easily
                        </button>
                        <button class="option-btn" onclick="showSuggestion('sleeping')">
                            I'm having trouble sleeping
                        </button>
                        <button class="option-btn" onclick="showSuggestion('eating')">
                            My eating patterns have changed significantly
                        </button>
                        <button class="option-btn" onclick="showSuggestion('worthless')">
                            I feel like I'm not good enough
                        </button>
                        <button class="option-btn" onclick="showSuggestion('physical')">
                            I'm experiencing physical symptoms (headaches, chest pain, etc.)
                        </button>
                        <button class="option-btn" onclick="showSuggestion('memories')">
                            I'm bothered by intrusive thoughts or memories
                        </button>
                        <button class="option-btn" onclick="showSuggestion('motivation')">
                            I have no motivation to do anything
                        </button>
                        <button class="option-btn" onclick="showSuggestion('relationships')">
                            I'm having conflicts in my relationships
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="coming-soon-section" id="downloadSection">
            <div class="coming-soon-box">
                <h3>COMING SOON</h3>
                <p style="font-size: 1.2rem; margin-bottom: 1.5rem;">Our mobile app is under development</p>
                <p>Get ready to access UDAAN-X support anytime, anywhere</p>
                <div style="margin-top: 2rem; font-size: 3rem;">
                    üì± üçé
                </div>
            </div>
        </section>
    </div>

    <!-- VOICE HER MODULE -->
    <div id="voiceherPage" class="page-container hidden">
        <h2 class="page-title">Voice Her - Menu</h2>
        <div class="menu-grid">
            <button class="menu-btn" onclick="openSubModule('report')">üìù Submit Anonymous Report</button>
            <button class="menu-btn" onclick="openSubModule('story')">üìñ Share Your Story</button>
            <button class="menu-btn" onclick="openSubModule('submissions')">üìã My Submissions</button>
            <button class="menu-btn" onclick="openSubModule('help')">üè• Help Centers</button>
            
            <!-- Track Case Submodule -->
            <div class="submodule-card" onclick="window.location.href='case_tracker.html'">
            <button class="menu-btn" onclick="openSubModule('case')">üîç Track Case</button>
              <h3>Track Case</h3>
            </div>

        </div>
        <button class="submit-btn back-btn" onclick="showHome()">Back to Home</button>
    </div>

    <!-- SAHELI CONNECT MODULE -->
    <div id="saheliPage" class="page-container hidden">
        <h2 class="page-title">Saheli Connect - Forum</h2>
        <div style="max-width: 800px; margin: 2rem auto; padding: 0 2rem;">
            <div class="modal-content" style="margin-bottom: 2rem;">
                <h3>Create New Post</h3>
                <div id="forumMsg"></div>
                <div class="form-group">
                    <input type="text" id="forumTitle" placeholder="Post Title">
                </div>
                <div class="form-group">
                    <textarea id="forumContent" rows="4" placeholder="Share your thoughts..."></textarea>
                </div>
                <button class="submit-btn" onclick="submitForumPost()">Create Post</button>
            </div>
            <div id="forumPosts"></div>
        </div>
        <button class="submit-btn back-btn" onclick="showHome()">Back to Home</button>
    </div>

    <!-- GRAMEEN SAATHI MODULE -->
    <div id="grameenPage" class="page-container hidden">
        <h2 class="page-title">Grameen Saathi</h2>
        <div class="menu-grid">
            <button class="menu-btn" onclick="openSchemes()">üèõÔ∏è Government Schemes</button>
            <button class="menu-btn" onclick="openHealthTips()">üè• Health Tips</button>
            <button class="menu-btn" onclick="openEducationalResources()">üìö Educational Resources</button>
            <button class="menu-btn" onclick="openDigitalLiteracy()">üíª Digital Literacy</button>
            <button class="menu-btn" onclick="openTrainingOpportunities()">üéì Training Opportunities</button>
        </div>
        <button class="submit-btn back-btn" onclick="showHome()">Back to Home</button>
    </div>

    <!-- ADDICTION HELP MODULE -->
    <div id="addictionPage" class="page-container hidden">
        <h2 class="page-title">Addiction Help & Recovery</h2>
        <div class="menu-grid">
            <button class="menu-btn" onclick="window.open('https://forms.gle/q1xm7j6ZHX7E4UNQ9', '_blank')">üíä KITNA
                NASHA?</button>
            <button class="menu-btn" onclick="window.open('https://forms.gle/5HWQSEL2RJ9GA1TA9', '_blank')">üîÑ BADLAAV
                KI SHURUAAT</button>
            <button class="menu-btn" onclick="window.open('https://forms.gle/hVarXgRczK39cRrx7', '_blank')">üí≠ MANN KI
                BAAT</button>
            <button class="menu-btn" onclick="openProgressTracker()">üìà Progress Tracker</button>
            <button class="menu-btn" onclick="openSupportGroups()">üë• Peer Support Groups</button>
        </div>
        <button class="submit-btn back-btn" onclick="showHome()">Back to Home</button>
    </div>

    <!-- STRESS MANAGEMENT MODULE -->
    <div id="stressPage" class="page-container hidden">
        <h2 class="page-title">Stress Management System</h2>
        <div style="max-width: 800px; margin: 2rem auto; padding: 0 2rem;">
            <div class="stress-container">
                <div class="question-box">
                    <h3>How are you feeling right now?</h3>
                    <div class="options">
                        <button class="option-btn" onclick="showSuggestion('low')">
                            I feel very low and tired
                        </button>
                        <button class="option-btn" onclick="showSuggestion('hopeless')">
                            I feel hopeless about the future
                        </button>
                        <button class="option-btn" onclick="showSuggestion('stressed')">
                            I feel stressed and cannot focus
                        </button>
                        <button class="option-btn" onclick="showSuggestion('isolated')">
                            I feel like I don't want to talk to anyone
                        </button>
                        <button class="option-btn" onclick="showSuggestion('anxious')">
                            I feel constantly anxious or worried
                        </button>
                        <button class="option-btn" onclick="showSuggestion('overwhelmed')">
                            I feel overwhelmed by daily tasks
                        </button>
                        <button class="option-btn" onclick="showSuggestion('angry')">
                            I feel irritable or angry easily
                        </button>
                        <button class="option-btn" onclick="showSuggestion('sleeping')">
                            I'm having trouble sleeping
                        </button>
                        <button class="option-btn" onclick="showSuggestion('eating')">
                            My eating patterns have changed significantly
                        </button>
                        <button class="option-btn" onclick="showSuggestion('worthless')">
                            I feel like I'm not good enough
                        </button>
                        <button class="option-btn" onclick="showSuggestion('physical')">
                            I'm experiencing physical symptoms (headaches, chest pain, etc.)
                        </button>
                        <button class="option-btn" onclick="showSuggestion('memories')">
                            I'm bothered by intrusive thoughts or memories
                        </button>
                        <button class="option-btn" onclick="showSuggestion('motivation')">
                            I have no motivation to do anything
                        </button>
                        <button class="option-btn" onclick="showSuggestion('relationships')">
                            I'm having conflicts in my relationships
                        </button>
                        <h3>Q. In the past month, how has your interest or enjoyment in activities changed?</h3>
                        <div class="options">
                            <button class="option-btn" onclick="showSuggestion('hobby_a')">
                                I enjoy things like before; I still make time for hobbies and socializing
                            </button>
                            <button class="option-btn" onclick="showSuggestion('hobby_b')">
                                I'm a little less interested but still join in sometimes
                            </button>
                            <button class="option-btn" onclick="showSuggestion('hobby_c')">
                                I often avoid activities I used to like and feel boredom about them
                            </button>
                            <button class="option-btn" onclick="showSuggestion('hobby_d')">
                                I've lost interest in almost everything and rarely do anything enjoyable
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <button class="submit-btn back-btn" onclick="showHome()">Back to Home</button>
        </div> <!-- End of stressPage -->
    </div> <!-- End of stress-container -->
    </div> <!-- End of main container div around line 937 -->
    <!-- Add this HTML before the closing </body> tag -->
    <!-- Chatbot Widget -->
    <div id="chatbotWidget" class="chatbot-widget">
        <!-- Chat Button with Avatar -->
        <button id="chatbotToggle" class="chatbot-toggle">
            <img src="https://api.dicebear.com/7.x/bottts/svg?seed=UdaanBot&backgroundColor=8B4513" alt="Chatbot"
                class="chatbot-avatar">
        </button>
        <div class="online-badge">Online</div>

        <!-- Chat Window -->
        <div id="chatbotWindow" class="chatbot-window hidden">
            <!-- Header -->
            <div class="chatbot-header">
                <div>
                    <h3 style="margin: 0; font-size: 1.1rem;">UDAAN-X Assistant</h3>
                    <p style="margin: 0; font-size: 0.75rem; opacity: 0.9;">Ask me anything!</p>
                </div>
                <button id="chatbotClose" class="chatbot-close-btn">‚úï</button>
            </div>

            <!-- Messages Container -->
            <div id="chatbotMessages" class="chatbot-messages">
                <div class="chatbot-message bot-message">
                    <div class="message-content">
                        üëã Hello! I'm your UDAAN-X assistant. How can I help you today?
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="chatbot-input-area">
                <input type="text" id="chatbotInput" class="chatbot-input" placeholder="Type your message..."
                    autocomplete="off" />
                <button id="chatbotSend" class="chatbot-send-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <style>
        /* Chatbot Styles */
        .chatbot-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chatbot-toggle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: white;
            border: 3px solid #8B4513;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            padding: 0;
            overflow: hidden;
        }

        .chatbot-avatar {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .chatbot-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .online-badge {
            position: absolute;
            bottom: 75px;
            right: 5px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.8;
            }
        }

        .chatbot-window {
            position: absolute;
            bottom: 95px;
            right: 0;
            width: 380px;
            height: 520px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .chatbot-window.hidden {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #8B4513, #654321);
            color: white;
            padding: 1rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .chatbot-close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.25rem;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chatbot-message {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-content {
            max-width: 75%;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            word-wrap: break-word;
        }

        .bot-message .message-content {
            background: linear-gradient(135deg, #8B4513, #654321);
            color: white;
            border-bottom-left-radius: 4px;
        }

        .user-message {
            justify-content: flex-end;
        }

        .user-message .message-content {
            background: #e3f2fd;
            color: #333;
            border-bottom-right-radius: 4px;
        }

        .chatbot-input-area {
            display: flex;
            padding: 1rem;
            background: white;
            border-top: 1px solid #e0e0e0;
            gap: 0.5rem;
        }

        .chatbot-input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 24px;
            outline: none;
            font-size: 0.95rem;
            transition: border-color 0.2s ease;
        }

        .chatbot-input:focus {
            border-color: #8B4513;
        }

        .chatbot-send-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8B4513, #654321);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }

        .chatbot-send-btn:hover {
            transform: scale(1.1);
        }

        .chatbot-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 0.75rem 1rem;
            background: linear-gradient(135deg, #8B4513, #654321);
            border-radius: 12px;
            border-bottom-left-radius: 4px;
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {

            0%,
            60%,
            100% {
                transform: translateY(0);
            }

            30% {
                transform: translateY(-10px);
            }
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            .chatbot-window {
                width: calc(100vw - 40px);
                height: 70vh;
                bottom: 80px;
            }
        }
    </style>

    <script>
        // Chatbot Functionality
        const chatbotToggle = document.getElementById('chatbotToggle');
        const chatbotWindow = document.getElementById('chatbotWindow');
        const chatbotClose = document.getElementById('chatbotClose');
        const chatbotInput = document.getElementById('chatbotInput');
        const chatbotSend = document.getElementById('chatbotSend');
        const chatbotMessages = document.getElementById('chatbotMessages');

        // Toggle chat window
        chatbotToggle.addEventListener('click', () => {
            chatbotWindow.classList.toggle('hidden');
            if (!chatbotWindow.classList.contains('hidden')) {
                chatbotInput.focus();
            }
        });

        chatbotClose.addEventListener('click', () => {
            chatbotWindow.classList.add('hidden');
        });

        // Enhanced knowledge base with more responses
        const responses = {
            // Greetings
            greetings: [
                "Hello! üëã Welcome to UDAAN-X. I'm here to help you with mental health support, wellness services, and more. What would you like to know?",
                "Hi there! üòä Thanks for reaching out to UDAAN-X. How can I assist you today?",
                "Namaste! üôè Welcome to UDAAN-X wellness platform. Feel free to ask me anything about our services."
            ],

            // Services and Features
            services: [
                "UDAAN-X offers comprehensive wellness services:\n\nüí¨ Voice Her - Women's safety & empowerment\nü§ù Saheli Connect - Community support forum\nüåæ Grameen Saathi - Rural outreach programs\nüíä Addiction Help - Recovery support\nüßò Stress Management - Personalized coping strategies\n\nWhich service interests you?"
            ],

            voiceher: [
                "Voice Her is our women's safety platform where you can:\n‚Ä¢ Submit anonymous reports\n‚Ä¢ Share your story safely\n‚Ä¢ Track your case\n‚Ä¢ Find help centers\n\nYour voice matters and we're here to support you. üí™"
            ],

            saheli: [
                "Saheli Connect is our community forum where you can:\n‚Ä¢ Share experiences anonymously\n‚Ä¢ Connect with others going through similar challenges\n‚Ä¢ Get peer support\n‚Ä¢ Find understanding and empathy\n\nYou're not alone in this journey. ü§ó"
            ],

            grameen: [
                "Grameen Saathi provides:\n‚Ä¢ Information about government schemes\n‚Ä¢ Health tips in simple language\n‚Ä¢ Educational resources\n‚Ä¢ Digital literacy programs\n‚Ä¢ Training opportunities\n\nBringing wellness support to rural communities! üåæ"
            ],

            addiction: [
                "Our Addiction Help module offers:\n\nüíä KITNA NASHA? - Self-assessment tool\nüîÑ BADLAAV KI SHURUAAT - Begin your recovery journey\nüí≠ MANN KI BAAT - Share your thoughts confidentially\n\nRecovery is possible, and we're here to support you every step. üíö"
            ],

            // Mental Health Support
            stress: [
                "I understand stress can be overwhelming. Here are some immediate tips:\n\nüßò Take 5 deep breaths - in for 4 counts, out for 6\nüö∂ Go for a short 10-minute walk\nüíß Drink water and stay hydrated\nüì± Call our helpline: 1452 235 1463\n\nYou can also try our Stress Management module for personalized strategies."
            ],

            anxiety: [
                "Anxiety is really tough. Try the 5-4-3-2-1 grounding technique:\n\nüëÄ Name 5 things you can see\nü§ö 4 things you can touch\nüëÇ 3 things you can hear\nüëÉ 2 things you can smell\nüëÖ 1 thing you can taste\n\nThis helps anchor you to the present. Our helpline is available 24/7: 1452 235 1463"
            ],

            depression: [
                "I'm sorry you're going through this. Depression is a real illness, and you deserve support.\n\nüÜò Immediate help: 1452 235 1463\nüíö National Helpline: 9152987821\n\nPlease consider speaking with a mental health professional. You don't have to face this alone. Treatment works, and things can get better."
            ],

            sad: [
                "It's okay to feel sad. Your feelings are valid. Here are some gentle suggestions:\n\nüíô Reach out to someone you trust\nüìù Journal your thoughts\nüéµ Listen to music that comforts you\n‚òÄÔ∏è Step outside for fresh air\n\nIf sadness persists for weeks, please talk to a counselor. We're here: 1452 235 1463"
            ],

            lonely: [
                "Loneliness can be really painful. You're reaching out, and that's a brave first step. üíô\n\nConsider:\n‚Ä¢ Joining our Saheli Connect forum\n‚Ä¢ Calling our helpline: 1452 235 1463\n‚Ä¢ Reconnecting with an old friend\n‚Ä¢ Volunteering in your community\n\nYou matter, and connection is possible."
            ],

            suicide: [
                "üö® I'm very concerned about you. Please reach out for immediate help:\n\nüìû UDAAN-X Emergency: 1452 235 1463\nüÜò National Suicide Helpline: 9152987821\nüè• AASRA: 91-9820466726\n\nYour life has value. Please talk to someone right now. Crisis support is available 24/7."
            ],

            // Practical Help
            contact: [
                "You can reach UDAAN-X at:\n\nüìû Phone: 1452 235 1463 (24/7)\nüê¶ Twitter: @udaan-x\nüì∑ Instagram: @udaanx\n\nüë• Team:\n‚Ä¢ Anand Verma\n‚Ä¢ Mandeep\n\nWe're here to help anytime! üòä"
            ],

            download: [
                "Our mobile app is coming soon! üì±üéâ\n\nYou'll be able to:\n‚Ä¢ Access all services on the go\n‚Ä¢ Get instant notifications\n‚Ä¢ Track your wellness journey\n‚Ä¢ Connect with support 24/7\n\nAvailable on Android & iOS soon. Stay tuned!"
            ],

            emergency: [
                "üö® EMERGENCY CONTACTS:\n\nüìû UDAAN-X Helpline: 1452 235 1463\nüÜò National Helpline: 9152987821\nüè• AASRA: 91-9820466726\nüëÆ Police: 100\nüöë Ambulance: 102\n\nIf you or someone is in immediate danger, please call emergency services now!"
            ],

            help: [
                "I'm here to help! You can ask me about:\n\nüí¨ Our services (Voice Her, Saheli Connect, etc.)\nüß† Mental health support\n‚òéÔ∏è Contact information\nüì± Mobile app\nüÜò Emergency resources\nüìù How to get started\n\nWhat would you like to know?"
            ],

            about: [
                "UDAAN-X is an Empowerment, Recovery & Wellness Platform created to support:\n\nüë© Women's safety and empowerment\nüèòÔ∏è Rural community wellness\nüíö Mental health and addiction recovery\nüßò Stress management\n\nFounded by Anand Verma and Mandeep, we're dedicated to making mental health support accessible to all. Your journey to wellness starts here! üåü"
            ],

            // Positive reinforcement
            thanks: [
                "You're very welcome! üòä I'm here whenever you need support. Take care of yourself! üíô",
                "Happy to help! Remember, you're not alone. We're here 24/7 at 1452 235 1463. ü§ó",
                "My pleasure! Don't hesitate to reach out anytime. Wishing you wellness and peace. üåü"
            ],

            // Default fallback
            default: [
                "Thank you for your message. For personalized assistance, please:\n\nüìû Call us: 1452 235 1463 (24/7)\nüí¨ Explore our services on the website\nüìß Connect via Instagram: @udaanx\n\nOur team is ready to help you! What else can I assist with?"
            ]
        };

        // Function to match user input to responses
        function getBotResponse(userMessage) {
            const message = userMessage.toLowerCase().trim();

            // Crisis keywords - highest priority
            if (message.includes('suicide') || message.includes('kill myself') || message.includes('end my life') ||
                message.includes('want to die') || message.includes('self harm') || message.includes('hurt myself')) {
                return getRandomResponse('suicide');
            }

            // Greetings
            if (message.match(/\b(hello|hi|hey|namaste|good morning|good afternoon|good evening)\b/)) {
                return getRandomResponse('greetings');
            }

            // Services
            if (message.includes('service') || message.includes('what do you offer') || message.includes('what can you do') ||
                message.includes('modules') || message.includes('features')) {
                return getRandomResponse('services');
            }

            if (message.includes('voice her') || message.includes('voiceher') || message.includes('women') ||
                message.includes('safety') || message.includes('report')) {
                return getRandomResponse('voiceher');
            }

            if (message.includes('saheli') || message.includes('community') || message.includes('forum') ||
                message.includes('connect')) {
                return getRandomResponse('saheli');
            }

            if (message.includes('grameen') || message.includes('rural') || message.includes('village') ||
                message.includes('scheme')) {
                return getRandomResponse('grameen');
            }

            if (message.includes('addiction') || message.includes('drug') || message.includes('alcohol') ||
                message.includes('nasha') || message.includes('recovery')) {
                return getRandomResponse('addiction');
            }

            // Mental health
            if (message.includes('stress') || message.includes('stressed') || message.includes('overwhelm') ||
                message.includes('pressure') || message.includes('tense')) {
                return getRandomResponse('stress');
            }

            if (message.includes('anxiety') || message.includes('anxious') || message.includes('worried') ||
                message.includes('panic') || message.includes('nervous')) {
                return getRandomResponse('anxiety');
            }

            if (message.includes('depression') || message.includes('depressed') || message.includes('hopeless')) {
                return getRandomResponse('depression');
            }

            if (message.includes('sad') || message.includes('down') || message.includes('upset') ||
                message.includes('crying') || message.includes('tears')) {
                return getRandomResponse('sad');
            }

            if (message.includes('lonely') || message.includes('alone') || message.includes('isolated') ||
                message.includes('no friends')) {
                return getRandomResponse('lonely');
            }

            // Practical queries
            if (message.includes('contact') || message.includes('phone') || message.includes('email') ||
                message.includes('reach') || message.includes('call')) {
                return getRandomResponse('contact');
            }

            if (message.includes('download') || message.includes('app') || message.includes('mobile') ||
                message.includes('android') || message.includes('ios')) {
                return getRandomResponse('download');
            }

            if (message.includes('emergency') || message.includes('urgent') || message.includes('crisis') ||
                message.includes('immediate help')) {
                return getRandomResponse('emergency');
            }

            if (message.includes('help') || message.includes('support') || message.includes('assist')) {
                return getRandomResponse('help');
            }

            if (message.includes('about') || message.includes('who are you') || message.includes('what is udaan') ||
                message.includes('udaan-x')) {
                return getRandomResponse('about');
            }

            if (message.includes('thank') || message.includes('thanks') || message.includes('appreciate')) {
                return getRandomResponse('thanks');
            }

            // Default
            return getRandomResponse('default');
        }

        // Get random response from array
        function getRandomResponse(category) {
            const responseArray = responses[category];
            return responseArray[Math.floor(Math.random() * responseArray.length)];
        }

        // Add message to chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chatbot-message ${sender}-message`;

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = text;

            messageDiv.appendChild(contentDiv);
            chatbotMessages.appendChild(messageDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // Show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chatbot-message bot-message';
            typingDiv.id = 'typingIndicator';

            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            indicator.innerHTML = `
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class=
    `;

            typingDiv.appendChild(indicator);
            chatbotMessages.appendChild(typingDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const typing = document.getElementById('typingIndicator');
            if (typing) typing.remove();
        }

        // Handle sending messages
        function handleSendMessage() {
            const message = chatbotInput.value.trim();
            if (!message) return;

            addMessage(message, 'user');
            chatbotInput.value = '';
            chatbotSend.disabled = true;

            showTypingIndicator();

            // Simulate thinking time
            setTimeout(() => {
                removeTypingIndicator();
                const botResponse = getBotResponse(message);
                addMessage(botResponse, 'bot');
                chatbotSend.disabled = false;
                chatbotInput.focus();
            }, 1000);
        }

        // Event Listeners
        chatbotSend.addEventListener('click', handleSendMessage);
        chatbotInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSendMessage();
        });
    </script>

    <!-- Move footer here, outside stressPage -->
    <footer id="contactSection" class="footer">
        <div>
            <div class="footer-section">
                <h3>UDAAN-X</h3>
                <p>Empowerment, Recovery & Wellness Platform</p>
                <p>Your journey to wellness starts here</p>
            </div>
        </div>
        <div class="footer-section" style="text-align: right;">
            <h3>Contact Us</h3>
            <p>üìû 1452 235 1463</p>
            <p>üìß udaaanx@gmail.com</p>
            <p>üåê ~ ANAND VERMA</p>
            <p>&nbsp;&nbsp;&nbsp;~ MANDEEP</p>
        </div>
        <p
            style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.2);">
            &copy; 2025 UDAAN-X - All Rights Reserved</p>
    </footer>
    <!-- Animated Login/Signup Widget -->
    <div class="auth-widget">
        <button class="auth-trigger-btn" onclick="openAnimatedAuth()">
            üë§
        </button>
    </div>

    <div class="animated-auth-container" id="animatedAuthContainer">
        <div class="auth-box-container" id="authBoxContainer">
            <button class="auth-close-btn" onclick="closeAnimatedAuth()">√ó</button>

            <!-- Login Form -->
            <div class="auth-form-box login-box">
                <h2>Login</h2>
                <form onsubmit="event.preventDefault(); handleAnimatedLogin();">
                    <div class="auth-input-box">
                        <input type="text" placeholder="Username" required id="animLoginUser">
                        <span class="auth-icon">üë§</span>
                    </div>
                    <div class="auth-input-box">
                        <input type="password" placeholder="Password" required id="animLoginPass">
                        <span class="auth-icon">üîí</span>
                    </div>
                    <button type="submit" class="auth-btn">Login</button>
                    <div class="auth-toggle-text">
                        Don't have an account? <a onclick="toggleAnimatedForm()">Sign Up</a>
                    </div>
                </form>
            </div>

            <!-- Register Form -->
            <div class="auth-form-box register-box">
                <h2>Create Account</h2>
                <form onsubmit="event.preventDefault(); handleAnimatedSignup();">
                    <div class="auth-input-box">
                        <input type="text" placeholder="Full Name" required id="animSignupName">
                        <span class="auth-icon">üë§</span>
                    </div>
                    <div class="auth-input-box">
                        <input type="number" placeholder="Age" required id="animSignupAge">
                    </div>
                    <div class="auth-input-box">
                        <select required id="animSignupGender">
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="auth-input-box">
                        <input type="email" placeholder="Email" required id="animSignupEmail">
                        <span class="auth-icon">üìß</span>
                    </div>
                    <div class="auth-input-box">
                        <input type="password" placeholder="Password" required id="animSignupPass">
                        <span class="auth-icon">üîí</span>
                    </div>
                    <div class="auth-input-box">
                        <input type="tel" placeholder="Phone" required id="animSignupPhone">
                    </div>
                    <div class="auth-input-box">
                        <input type="text" placeholder="Address" required id="animSignupAddress">
                    </div>
                    <div class="auth-input-box">
                        <input type="text" placeholder="Aadhaar Number" required id="animSignupAadhaar">
                    </div>
                    <button type="submit" class="auth-btn">Sign Up</button>
                    <div class="auth-toggle-text">
                        Already have an account? <a onclick="toggleAnimatedForm()">Login</a>
                    </div>
                </form>
            </div>

            <!-- Login Welcome Panel -->
            <div class="auth-welcome-box login-welcome">
                <h1>WELCOME<br>BACK!</h1>
                <p>We are happy to have you with us again. If you need anything, we are here to help.</p>
            </div>

            <!-- Register Welcome Panel -->
            <div class="auth-welcome-box register-welcome">
                <h1>WELCOME!</h1>
                <p>We're delighted to have you here. If you need any assistance, feel free to reach out.</p>
            </div>
        </div>
    </div>

    <!-- SUB MODULE MODAL -->
    <div id="subModuleModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('subModuleModal')">&times;</button>
            <div id="subModuleContent"></div>
        </div>
    </div>

    <!-- SUGGESTION MODAL -->
    <div id="suggestionModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('suggestionModal')">&times;</button>
            <h2>üí° Personalized Suggestion</h2>
            <p id="suggestionContent" style="line-height: 1.8; color: #666;"></p>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:3000/api';
        let currentUser = null;
        let currentLang = 'en';

        // Translation dictionary for common UI elements
        const translations = {
            en: {
                home: 'Home',
                services: 'Services',
                stressHelp: 'Stress Help',
                download: 'Download',
                contact: 'Contact',
                login: 'Login',
                signUp: 'Sign Up',
                logout: 'Logout',
                welcome: 'Welcome',
                title: 'UDAAN-X',
                subtitle: 'Empowerment, Recovery & Wellness Platform',
                description: 'Supporting women, rural communities, and individuals on their journey to mental wellness and recovery',
                exploreModules: 'Explore Our Modules',
                supportModules: 'Our Support Modules',
                voiceHer: 'Voice Her',
                voiceHerDesc: 'Women\'s voice, safety, and empowerment platform',
                saheli: 'Saheli Connect',
                saheliDesc: 'Community support and connection network',
                grameen: 'Grameen Saathi',
                grameenDesc: 'Rural outreach and awareness programs',
                addiction: 'Addiction Help',
                addictionDesc: 'Recovery and mental wellness support',
                stress: 'Stress Management',
                stressDesc: 'Personalized stress relief and coping strategies',
                voiceHerMenu: 'Voice Her - Menu',
                submitReport: 'Submit Anonymous Report',
                shareStory: 'Share Your Story',
                mySubmissions: 'My Submissions',
                helpCenters: 'Help Centers',
                trackCase: 'Track Case',
                backToHome: 'Back to Home',

                // Saheli Connect
                saheliTitle: 'Saheli Connect - Forum',
                createPost: 'Create New Post',
                postTitle: 'Post Title',
                postContent: 'Share your thoughts...',
                createPostBtn: 'Create Post',

                // Grameen Saathi
                grameenTitle: 'Grameen Saathi',
                govSchemes: 'Government Schemes',
                healthTips: 'Health Tips',
                eduResources: 'Educational Resources',
                digitalLiteracy: 'Digital Literacy',
                trainingOpp: 'Training Opportunities',

                // Addiction Help
                addictionTitle: 'Addiction Help & Recovery',
                selfAssessment: 'Self-Assessment Tools',
                therapyExercises: 'Therapy & Coping Exercises',
                rehabSupport: 'Rehabilitation Support',
                progressTracker: 'Progress Tracker',
                supportGroups: 'Peer Support Groups',

                // Stress Management
                stressTitle: 'Stress Management System',
                howFeeling: 'How are you feeling right now?',
                feelLowTired: 'I feel very low and tired',
                feelHopeless: 'I feel hopeless about the future',
                feelStressed: 'I feel stressed and cannot focus',
                feelIsolated: 'I feel like I don\'t want to talk to anyone',
                feelAnxious: 'I feel constantly anxious or worried',
                feelOverwhelmed: 'I feel overwhelmed by daily tasks',
                feelAngry: 'I feel irritable or angry easily',
                troubleSleeping: 'I\'m having trouble sleeping',
                eatingChanged: 'My eating patterns have changed significantly',
                feelWorthless: 'I feel like I\'m not good enough',
                physicalSymptoms: 'I\'m experiencing physical symptoms (headaches, chest pain, etc.)',
                intrusiveMemories: 'I\'m bothered by intrusive thoughts or memories',
                noMotivation: 'I have no motivation to do anything',
                relationshipConflicts: 'I\'m having conflicts in my relationships',
                suggestion: 'Personalized Suggestion',

                // Form Labels
                category: 'Category',
                description: 'Description',
                selectCategory: 'Select Category',
                harassment: 'Harassment',
                abuse: 'Abuse',
                violence: 'Violence',
                other: 'Other',
                describeSituation: 'Describe your situation...',
                submitBtn: 'Submit',
                yourStory: 'Your Story',
                shareExperience: 'Share your experience...',
                caseId: 'Case ID',
                enterCaseId: 'Enter Case ID (e.g., CASE000001)',

                // Messages
                comingSoon: 'COMING SOON',
                appUnderDev: 'Our mobile app is under development',
                accessAnywhere: 'Get ready to access UDAAN-X support anytime, anywhere',
                featureComingSoon: 'This feature is coming soon!'

            },
            hi: {
                home: '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡•É‡§∑‡•ç‡§†',
                services: '‡§∏‡•á‡§µ‡§æ‡§è‡§Ç',
                stressHelp: '‡§§‡§®‡§æ‡§µ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                download: '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°',
                contact: '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï',
                login: '‡§≤‡•â‡§ó‡§ø‡§®',
                signUp: '‡§∏‡§æ‡§á‡§® ‡§Ö‡§™',
                logout: '‡§≤‡•â‡§ó‡§Ü‡§â‡§ü',
                welcome: '‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à',
                title: '‡§â‡§°‡§º‡§æ‡§®-X',
                subtitle: '‡§∏‡§∂‡§ï‡•ç‡§§‡§ø‡§ï‡§∞‡§£, ‡§™‡•Å‡§®‡§∞‡•ç‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø ‡§î‡§∞ ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§Æ‡§Ç‡§ö',
                description: '‡§Æ‡§π‡§ø‡§≤‡§æ‡§ì‡§Ç, ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø‡•ã‡§Ç ‡§î‡§∞ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§î‡§∞ ‡§™‡•Å‡§®‡§∞‡•ç‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø ‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                exploreModules: '‡§π‡§Æ‡§æ‡§∞‡•á ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤ ‡§¶‡•á‡§ñ‡•á‡§Ç',
                supportModules: '‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤',
                voiceHer: '‡§µ‡•â‡§á‡§∏ ‡§π‡§∞',
                voiceHerDesc: '‡§Æ‡§π‡§ø‡§≤‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º, ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§∏‡§∂‡§ï‡•ç‡§§‡§ø‡§ï‡§∞‡§£ ‡§Æ‡§Ç‡§ö',
                saheli: '‡§∏‡§π‡•á‡§≤‡•Ä ‡§ï‡§®‡•á‡§ï‡•ç‡§ü',
                saheliDesc: '‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§î‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï',
                grameen: '‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§∏‡§æ‡§•‡•Ä',
                grameenDesc: '‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§Ü‡§â‡§ü‡§∞‡•Ä‡§ö ‡§î‡§∞ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ',
                addiction: '‡§µ‡•ç‡§Ø‡§∏‡§® ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                addictionDesc: '‡§™‡•Å‡§®‡§∞‡•ç‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø ‡§î‡§∞ ‡§Æ‡§æ‡§®‡§∏‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                stress: '‡§§‡§®‡§æ‡§µ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®',
                stressDesc: '‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§§‡§®‡§æ‡§µ ‡§∞‡§æ‡§π‡§§ ‡§î‡§∞ ‡§Æ‡•Å‡§ï‡§æ‡§¨‡§≤‡§æ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø‡§Ø‡§æ‡§Å',

                // Voice Her Module
                voiceHerMenu: '‡§µ‡•â‡§á‡§∏ ‡§π‡§∞ - ‡§Æ‡•á‡§®‡•Ç',
                submitReport: '‡§ó‡•Å‡§Æ‡§®‡§æ‡§Æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç',
                shareStory: '‡§Ö‡§™‡§®‡•Ä ‡§ï‡§π‡§æ‡§®‡•Ä ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç',
                mySubmissions: '‡§Æ‡•á‡§∞‡•Ä ‡§∏‡§¨‡§Æ‡§ø‡§∂‡§®',
                helpCenters: '‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞',
                trackCase: '‡§ï‡•á‡§∏ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç',
                backToHome: '‡§π‡•ã‡§Æ ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç',

                // Saheli Connect
                saheliTitle: '‡§∏‡§π‡•á‡§≤‡•Ä ‡§ï‡§®‡•á‡§ï‡•ç‡§ü - ‡§´‡•ã‡§∞‡§Æ',
                createPost: '‡§®‡§à ‡§™‡•ã‡§∏‡•ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç',
                postTitle: '‡§™‡•ã‡§∏‡•ç‡§ü ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï',
                postContent: '‡§Ö‡§™‡§®‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç...',
                createPostBtn: '‡§™‡•ã‡§∏‡•ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç',

                // Grameen Saathi
                grameenTitle: '‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§∏‡§æ‡§•‡•Ä',
                govSchemes: '‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç',
                healthTips: '‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•Å‡§ù‡§æ‡§µ',
                eduResources: '‡§∂‡•à‡§ï‡•ç‡§∑‡§ø‡§ï ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®',
                digitalLiteracy: '‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡§æ‡§ï‡•ç‡§∑‡§∞‡§§‡§æ',
                trainingOpp: '‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§ï‡•á ‡§Ö‡§µ‡§∏‡§∞',

                // Addiction Help
                addictionTitle: '‡§µ‡•ç‡§Ø‡§∏‡§® ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§î‡§∞ ‡§™‡•Å‡§®‡§∞‡•ç‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§‡§ø',
                selfAssessment: '‡§∏‡•ç‡§µ-‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§â‡§™‡§ï‡§∞‡§£',
                therapyExercises: '‡§•‡•á‡§∞‡•á‡§™‡•Ä ‡§î‡§∞ ‡§Æ‡•Å‡§ï‡§æ‡§¨‡§≤‡§æ ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏',
                rehabSupport: '‡§™‡•Å‡§®‡§∞‡•ç‡§µ‡§æ‡§∏ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                progressTracker: '‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞',
                supportGroups: '‡§∏‡§π‡§ï‡§∞‡•ç‡§Æ‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§∏‡§Æ‡•Ç‡§π',

                // Stress Management
                stressTitle: '‡§§‡§®‡§æ‡§µ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä',
                howFeeling: '‡§Ü‡§™ ‡§Ö‡§≠‡•Ä ‡§ï‡•à‡§∏‡§æ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?',
                feelLowTired: '‡§Æ‡•à‡§Ç ‡§¨‡§π‡•Å‡§§ ‡§ï‡§Æ ‡§î‡§∞ ‡§•‡§ï‡§æ ‡§π‡•Å‡§Ü ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç',
                feelHopeless: '‡§Æ‡•Å‡§ù‡•á ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∞‡§æ‡§∂‡§æ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à',
                feelStressed: '‡§Æ‡•à‡§Ç ‡§§‡§®‡§æ‡§µ‡§ó‡•ç‡§∞‡§∏‡•ç‡§§ ‡§π‡•Ç‡§Ç ‡§î‡§∞ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ',
                feelIsolated: '‡§Æ‡•Å‡§ù‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§∏‡•á ‡§¨‡§æ‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§Æ‡§® ‡§ï‡§∞‡§§‡§æ',
                feelAnxious: '‡§Æ‡•Å‡§ù‡•á ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§Ø‡§æ ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡•Ä ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à',
                feelOverwhelmed: '‡§Æ‡•à‡§Ç ‡§¶‡•à‡§®‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§∏‡•á ‡§Ö‡§≠‡§ø‡§≠‡•Ç‡§§ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Ç',
                feelAngry: '‡§Æ‡•Å‡§ù‡•á ‡§Ü‡§∏‡§æ‡§®‡•Ä ‡§∏‡•á ‡§ö‡§ø‡§°‡§º‡§ö‡§ø‡§°‡§º‡§æ‡§™‡§® ‡§Ø‡§æ ‡§ó‡•Å‡§∏‡•ç‡§∏‡§æ ‡§Ü‡§§‡§æ ‡§π‡•à',
                troubleSleeping: '‡§Æ‡•Å‡§ù‡•á ‡§∏‡•ã‡§®‡•á ‡§Æ‡•á‡§Ç ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡•Ä ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à',
                eatingChanged: '‡§Æ‡•á‡§∞‡•á ‡§ñ‡§æ‡§®‡•á ‡§ï‡•á ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§´‡•Ä ‡§¨‡§¶‡§≤‡§æ‡§µ ‡§Ü‡§Ø‡§æ ‡§π‡•à',
                feelWorthless: '‡§Æ‡•Å‡§ù‡•á ‡§≤‡§ó‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§Æ‡•à‡§Ç ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Ç‡§Ç',
                physicalSymptoms: '‡§Æ‡•Å‡§ù‡•á ‡§∂‡§æ‡§∞‡•Ä‡§∞‡§ø‡§ï ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç (‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶, ‡§∏‡•Ä‡§®‡•á ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶, ‡§Ü‡§¶‡§ø)',
                intrusiveMemories: '‡§Æ‡•Å‡§ù‡•á ‡§¶‡§ñ‡§≤ ‡§¶‡•á‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§µ‡§ø‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§Ø‡§æ ‡§Ø‡§æ‡§¶‡•ã‡§Ç ‡§∏‡•á ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡•Ä ‡§π‡•à',
                noMotivation: '‡§Æ‡•Å‡§ù‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§≠‡•Ä ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§™‡•ç‡§∞‡•á‡§∞‡§£‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
                relationshipConflicts: '‡§Æ‡•á‡§∞‡•á ‡§∞‡§ø‡§∂‡•ç‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§ò‡§∞‡•ç‡§∑ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à',
                suggestion: '‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§∏‡•Å‡§ù‡§æ‡§µ',

                // Form Labels
                category: '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä',
                description: '‡§µ‡§ø‡§µ‡§∞‡§£',
                selectCategory: '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç',
                harassment: '‡§â‡§§‡•ç‡§™‡•Ä‡§°‡§º‡§®',
                abuse: '‡§¶‡•Å‡§∞‡•ç‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞',
                violence: '‡§π‡§ø‡§Ç‡§∏‡§æ',
                other: '‡§Ö‡§®‡•ç‡§Ø',
                describeSituation: '‡§Ö‡§™‡§®‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡•á‡§Ç...',
                submitBtn: '‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç',
                yourStory: '‡§Ü‡§™‡§ï‡•Ä ‡§ï‡§π‡§æ‡§®‡•Ä',
                shareExperience: '‡§Ö‡§™‡§®‡§æ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç...',
                caseId: '‡§ï‡•á‡§∏ ‡§Ü‡§à‡§°‡•Ä',
                enterCaseId: '‡§ï‡•á‡§∏ ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•à‡§∏‡•á CASE000001)',

                // Messages
                comingSoon: '‡§ú‡§≤‡•ç‡§¶ ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à',
                appUnderDev: '‡§π‡§Æ‡§æ‡§∞‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ê‡§™ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§Æ‡•á‡§Ç ‡§π‡•à',
                accessAnywhere: '‡§ï‡§≠‡•Ä ‡§≠‡•Ä, ‡§ï‡§π‡•Ä‡§Ç ‡§≠‡•Ä UDAAN-X ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§ú‡§æ‡§è‡§Ç',
                featureComingSoon: '‡§Ø‡§π ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§ú‡§≤‡•ç‡§¶ ‡§Ü ‡§∞‡§π‡•Ä ‡§π‡•à!'

            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('udaanUser');
            if (saved) {
                currentUser = JSON.parse(saved);
                updateAuthUI();
            }

            const savedLang = localStorage.getItem('selectedLanguage');
            if (savedLang && savedLang !== 'en') {
                const langName = localStorage.getItem('selectedLanguageName');
                document.getElementById('currentLanguage').textContent = langName || 'English';
                currentLang = savedLang;
                applyTranslations(savedLang);
            }
        });

        function applyTranslations(langCode) {
            if (!translations[langCode]) {
                console.log('Language not supported:', langCode);
                return;
            }

            const t = translations[langCode];

            // Update navigation
            const navLinks = document.querySelectorAll('.nav-links a');
            if (navLinks[0]) navLinks[0].textContent = t.home;
            if (navLinks[1]) navLinks[1].textContent = t.services;
            if (navLinks[2]) navLinks[2].textContent = t.stressHelp;
            if (navLinks[3]) navLinks[3].textContent = t.download;
            if (navLinks[4]) navLinks[4].textContent = t.contact;

            // Update hero section
            const heroH1 = document.querySelector('.hero h1');
            const heroPs = document.querySelectorAll('.hero p');
            const ctaBtn = document.querySelector('.cta-button');

            if (heroH1) heroH1.textContent = t.title;
            if (heroPs[0]) heroPs[0].textContent = t.subtitle;
            if (heroPs[1]) heroPs[1].textContent = t.description;
            if (ctaBtn) ctaBtn.textContent = t.exploreModules;

            // Update modules section
            const modulesH2 = document.querySelector('.modules h2');
            if (modulesH2) modulesH2.textContent = t.supportModules;

            const moduleCards = document.querySelectorAll('.module-card');
            if (moduleCards[0]) {
                moduleCards[0].querySelector('h3').textContent = t.voiceHer;
                moduleCards[0].querySelector('p').textContent = t.voiceHerDesc;
            }
            if (moduleCards[1]) {
                moduleCards[1].querySelector('h3').textContent = t.saheli;
                moduleCards[1].querySelector('p').textContent = t.saheliDesc;
            }
            if (moduleCards[2]) {
                moduleCards[2].querySelector('h3').textContent = t.grameen;
                moduleCards[2].querySelector('p').textContent = t.grameenDesc;
            }
            if (moduleCards[3]) {
                moduleCards[3].querySelector('h3').textContent = t.addiction;
                moduleCards[3].querySelector('p').textContent = t.addictionDesc;
            }
            if (moduleCards[4]) {
                moduleCards[4].querySelector('h3').textContent = t.stress;
                moduleCards[4].querySelector('p').textContent = t.stressDesc;
                // Update page titles
                const pageTitle = document.querySelector('.page-title');
                if (pageTitle) {
                    const titleText = pageTitle.textContent.trim();
                    if (titleText.includes('Voice Her')) pageTitle.textContent = t.voiceHerMenu;
                    if (titleText.includes('Saheli')) pageTitle.textContent = t.saheliTitle;
                    if (titleText.includes('Grameen')) pageTitle.textContent = t.grameenTitle;
                    if (titleText.includes('Addiction')) pageTitle.textContent = t.addictionTitle;
                    if (titleText.includes('Stress')) pageTitle.textContent = t.stressTitle;
                }

                // Update buttons
                const buttons = document.querySelectorAll('.menu-btn, .submit-btn, .action-btn, .back-btn');
                buttons.forEach(btn => {
                    const text = btn.textContent.trim();
                    if (text.includes('Submit Anonymous Report')) btn.innerHTML = 'üìù ' + t.submitReport;
                    if (text.includes('Share Your Story')) btn.innerHTML = 'üìñ ' + t.shareStory;
                    if (text.includes('My Submissions')) btn.innerHTML = 'üìã ' + t.mySubmissions;
                    if (text.includes('Help Centers')) btn.innerHTML = 'üè• ' + t.helpCenters;
                    if (text.includes('Track Case')) btn.innerHTML = 'üîç ' + t.trackCase;
                    if (text.includes('Back to Home')) btn.textContent = t.backToHome;
                    if (text.includes('Government Schemes')) btn.innerHTML = 'üèõÔ∏è ' + t.govSchemes;
                    if (text.includes('Health Tips')) btn.innerHTML = 'üè• ' + t.healthTips;
                    if (text.includes('Educational Resources')) btn.innerHTML = 'üìö ' + t.eduResources;
                    if (text.includes('Digital Literacy')) btn.innerHTML = 'üíª ' + t.digitalLiteracy;
                    if (text.includes('Training Opportunities')) btn.innerHTML = 'üéì ' + t.trainingOpp;
                    if (text.includes('Self-Assessment')) btn.innerHTML = 'üìä ' + t.selfAssessment;
                    if (text.includes('Therapy')) btn.innerHTML = 'üßò ' + t.therapyExercises;
                    if (text.includes('Rehabilitation')) btn.innerHTML = 'üè• ' + t.rehabSupport;
                    if (text.includes('Progress Tracker')) btn.innerHTML = 'üìà ' + t.progressTracker;
                    if (text.includes('Support Groups')) btn.innerHTML = 'üë• ' + t.supportGroups;
                });

                // Update stress management questions
                const optionBtns = document.querySelectorAll('.option-btn');
                optionBtns.forEach(btn => {
                    const text = btn.textContent.trim();
                    if (text.includes('very low and tired')) btn.textContent = t.feelLowTired;
                    if (text.includes('hopeless about the future')) btn.textContent = t.feelHopeless;
                    if (text.includes('stressed and cannot focus')) btn.textContent = t.feelStressed;
                    if (text.includes('don\'t want to talk')) btn.textContent = t.feelIsolated;
                    if (text.includes('constantly anxious')) btn.textContent = t.feelAnxious;
                    if (text.includes('overwhelmed by daily')) btn.textContent = t.feelOverwhelmed;
                    if (text.includes('irritable or angry')) btn.textContent = t.feelAngry;
                    if (text.includes('trouble sleeping')) btn.textContent = t.troubleSleeping;
                    if (text.includes('eating patterns')) btn.textContent = t.eatingChanged;
                    if (text.includes('not good enough')) btn.textContent = t.feelWorthless;
                    if (text.includes('physical symptoms')) btn.textContent = t.physicalSymptoms;
                    if (text.includes('intrusive thoughts')) btn.textContent = t.intrusiveMemories;
                    if (text.includes('no motivation')) btn.textContent = t.noMotivation;
                    if (text.includes('conflicts in my relationships')) btn.textContent = t.relationshipConflicts;
                });

                // Update question headers
                const questionHeaders = document.querySelectorAll('.question-box h3');
                questionHeaders.forEach(h3 => {
                    if (h3.textContent.includes('How are you feeling')) {
                        h3.textContent = t.howFeeling;
                    }
                });

                // Update coming soon section
                const comingSoonH3 = document.querySelector('.coming-soon-box h3');
                if (comingSoonH3 && comingSoonH3.textContent.includes('COMING SOON')) {
                    comingSoonH3.textContent = t.comingSoon;
                }

                const comingSoonPs = document.querySelectorAll('.coming-soon-box p');
                if (comingSoonPs[0] && comingSoonPs[0].textContent.includes('mobile app')) {
                    comingSoonPs[0].textContent = t.appUnderDev;
                }
                if (comingSoonPs[1] && comingSoonPs[1].textContent.includes('access UDAAN-X')) {
                    comingSoonPs[1].textContent = t.accessAnywhere;
                }
            }
        }
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            dropdown.classList.toggle('show');
        }

        function changeLanguage(langCode, langName) {
            currentLang = langCode;
            document.getElementById('currentLanguage').textContent = langName;
            localStorage.setItem('selectedLanguage', langCode);
            localStorage.setItem('selectedLanguageName', langName);

            const dropdown = document.getElementById('languageDropdown');
            dropdown.classList.remove('show');

            document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
            event.target.classList.add('active');

            if (langCode === 'en') {
                // Reset to English by reloading page
                location.reload();
                return;
            }

            // For now, we support Hindi translation
            if (langCode === 'hi') {
                applyTranslations('hi');
            } else {
                alert('Full translation for ' + langName + ' is coming soon! Currently only Hindi is fully supported.');
                applyTranslations(langCode);
            }
        }


        document.addEventListener('click', function (event) {
            const languageSelector = document.querySelector('.language-selector');
            const dropdown = document.getElementById('languageDropdown');

            if (languageSelector && !languageSelector.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        function showHome() {
            document.querySelectorAll('.page-container').forEach(el => el.classList.add('hidden'));
            document.getElementById('homePage').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function scrollToModules() {
            document.getElementById('modulesSection').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToStress() {
            document.getElementById('stressSection').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToDownload() {
            document.getElementById('downloadSection').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToContact() {
            document.getElementById('contactSection').scrollIntoView({ behavior: 'smooth' });
        }

        function openModule(module) {
            document.querySelectorAll('.page-container').forEach(el => el.classList.add('hidden'));
            document.getElementById(module + 'Page').classList.remove('hidden');
            window.scrollTo(0, 0);

            if (module === 'saheli') {
                loadForumPosts();
            }
        }

        function openSubModule(subModule) {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            let html = '';

            if (subModule === 'report') {
                html = `
                    <h2>Submit Anonymous Report</h2>
                    <div id="reportMsg"></div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="reportCategory">
                            <option value="">Select Category</option>
                            <option value="Harassment">Harassment</option>
                            <option value="Abuse">Abuse</option>
                            <option value="Violence">Violence</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="reportDescription" rows="6" placeholder="Describe your situation..."></textarea>
                    </div>
                    <button class="submit-btn" onclick="submitReport()">Submit Report</button>
                `;
            } else if (subModule === 'story') {
                html = `
                    <h2>Share Your Story</h2>
                    <div id="storyMsg"></div>
                    <div class="form-group">
                        <label>Your Story</label>
                        <textarea id="storyContent" rows="8" placeholder="Share your experience..."></textarea>
                    </div>
                    <button class="submit-btn" onclick="submitStory()">Submit Story</button>
                `;
            } else if (subModule === 'submissions') {
                loadMySubmissions();
                return;
            } else if (subModule === 'case') {
                html = `
                    <h2>Track Your Case</h2>
                    <div class="form-group">
                        <label>Case ID</label>
                        <input type="text" id="caseIdInput" placeholder="Enter Case ID (e.g., CASE000001)">
                    </div>
                    <button class="submit-btn" onclick="trackCase()">Track Case</button>
                    <div id="caseResult"></div>
                `;
            } else if (subModule === 'help') {
                html = `
                    <h2>Help Centers</h2>
                    <p>This feature will help you find nearby support centers, NGOs, and legal help.</p>
                    <p style="color: #666; margin-top: 1rem;">Coming soon...</p>
                `;
            }

            content.innerHTML = html;
            modal.style.display = 'flex';
        }

        // Authentication Functions
        function openAuthModal(type) {
            const modal = document.getElementById('authModal');
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');

            if (type === 'login') {
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
            } else {
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
            }

            modal.style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function switchAuthForm(type) {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');

            if (type === 'login') {
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
            } else {
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
            }
        }

        function togglePassword(inputId, icon) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                icon.textContent = 'üôà';
            } else {
                input.type = 'password';
                icon.textContent = 'üëÅÔ∏è';
            }
        }

        async function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();

            if (!email || !password) {
                showMsg('loginMsg', 'Username and password are required', true);
                return;
            }

            // For demo purposes, create a mock user if backend is not available
            try {
                const response = await fetch('http://localhost:3000/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (response.ok) {
                    currentUser = data.user;
                    localStorage.setItem('udaanUser', JSON.stringify(currentUser));
                    showMsg('loginMsg', 'Login successful!');
                    setTimeout(() => {
                        updateAuthUI();
                        closeModal('authModal');
                    }, 1000);
                } else {
                    showMsg('loginMsg', data.error || 'Invalid credentials', true);
                }
            } catch (error) {
                // Fallback: Create demo user if server is not running
                console.log('Backend not available, using demo mode');
                currentUser = {
                    name: email.split('@')[0] || email,
                    email: email
                };
                localStorage.setItem('udaanUser', JSON.stringify(currentUser));
                showMsg('loginMsg', 'Login successful! (Demo mode - backend not connected)');
                setTimeout(() => {
                    updateAuthUI();
                    closeModal('authModal');
                }, 1500);
            }
        }

        async function handleSignup() {
            const data = {
                name: document.getElementById('signupName').value,
                age: document.getElementById('signupAge').value,
                gender: document.getElementById('signupGender').value,
                email: document.getElementById('signupEmail').value,
                password: document.getElementById('signupPassword').value,
                phone: document.getElementById('signupPhone').value,
                address: document.getElementById('signupAddress').value,
                aadhaar: document.getElementById('signupAadhaar').value
            };

            if (!data.name || !data.age || !data.gender || !data.email || !data.password || !data.phone || !data.address || !data.aadhaar) {
                showMsg('signupMsg', 'Please fill all fields', true);
                return;
            }

            try {
                const response = await fetch('http://localhost:3000/api/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    showMsg('signupMsg', 'Signup successful! Please login.');
                    setTimeout(() => switchAuthForm('login'), 2000);
                } else {
                    showMsg('signupMsg', result.error, true);
                }
            } catch (error) {
                showMsg('signupMsg', 'Cannot connect to server', true);
            }
        }

        function showMsg(id, msg, isError = false) {
            const el = document.getElementById(id);
            if (el) el.innerHTML = `<div class="message ${isError ? 'error' : 'success'}">${msg}</div>`;
        }

        // Close modal when clicking outside
        window.onclick = function (event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        function switchAuthForm(type) {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');

            if (type === 'login') {
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
            } else {
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function togglePassword(inputId, icon) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                icon.textContent = 'üôà';
            } else {
                input.type = 'password';
                icon.textContent = 'üëÅÔ∏è';
            }
        }

        function updateAuthUI() {
            const authButtons = document.getElementById('authButtons');
            const languageHTML = `
                <div class="language-selector">
                    <button class="language-btn" onclick="toggleLanguageDropdown()">
                        <span>üåê</span>
                        <span id="currentLanguage">${localStorage.getItem('selectedLanguageName') || 'English'}</span>
                    </button>
                    <div class="language-dropdown" id="languageDropdown">
                        <div class="language-option ${currentLang === 'en' ? 'active' : ''}" onclick="changeLanguage('en', 'English')">English</div>
                        <div class="language-option ${currentLang === 'hi' ? 'active' : ''}" onclick="changeLanguage('hi', '‡§π‡§ø‡§Ç‡§¶‡•Ä')">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</div>
                        <div class="language-option ${currentLang === 'bn' ? 'active' : ''}" onclick="changeLanguage('bn', '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ')">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</div>
                        <div class="language-option ${currentLang === 'te' ? 'active' : ''}" onclick="changeLanguage('te', '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</div>
                        <div class="language-option ${currentLang === 'mr' ? 'active' : ''}" onclick="changeLanguage('mr', '‡§Æ‡§∞‡§æ‡§†‡•Ä')">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</div>
                        <div class="language-option ${currentLang === 'ta' ? 'active' : ''}" onclick="changeLanguage('ta', '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç')">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</div>
                        <div class="language-option ${currentLang === 'gu' ? 'active' : ''}" onclick="changeLanguage('gu', '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä')">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</div>
                        <div class="language-option ${currentLang === 'kn' ? 'active' : ''}" onclick="changeLanguage('kn', '‡≤ï‡≤®‡≥ç‡≤®‡≤°')">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</div>
                        <div class="language-option ${currentLang === 'ml' ? 'active' : ''}" onclick="changeLanguage('ml', '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç')">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</div>
                        <div class="language-option ${currentLang === 'pa' ? 'active' : ''}" onclick="changeLanguage('pa', '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä')">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</div>
                        <div class="language-option ${currentLang === 'or' ? 'active' : ''}" onclick="changeLanguage('or', '‡¨ì‡¨°‡¨º‡¨ø‡¨Ü')">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</div>
                        <div class="language-option ${currentLang === 'as' ? 'active' : ''}" onclick="changeLanguage('as', '‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ')">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ (Assamese)</div>
                        <div class="language-option ${currentLang === 'ur' ? 'active' : ''}" onclick="changeLanguage('ur', 'ÿßÿ±ÿØŸà')">ÿßÿ±ÿØŸà (Urdu)</div>
                    </div>
                </div>
            `;

            if (currentUser) {
                authButtons.innerHTML = languageHTML + `
                    <span style="color: #5d4e37; margin-right: 1rem;">Welcome, ${currentUser.name}</span>
                    <button class="login-btn" onclick="logout()">Logout</button>
                `;
            } else {
                authButtons.innerHTML = languageHTML + `
                    <button class="login-btn" onclick="openAuthModal('login')">Login</button>
                    <button class="signup-btn" onclick="openAuthModal('signup')">Sign Up</button>
                `;
            }
        }

        function showMsg(id, msg, isError = false) {
            const el = document.getElementById(id);
            if (el) el.innerHTML = `<div class="message ${isError ? 'error' : 'success'}">${msg}</div>`;
        }

        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showMsg('loginMsg', 'Please fill all fields', true);
                return;
            }

            try {
                const response = await fetch(`${API_URL}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (response.ok) {
                    currentUser = data.user;
                    localStorage.setItem('udaanUser', JSON.stringify(currentUser));
                    updateAuthUI();
                    closeModal('authModal');
                    showMsg('loginMsg', 'Login successful!');
                } else {
                    showMsg('loginMsg', data.error, true);
                }
            } catch (error) {
                showMsg('loginMsg', 'Cannot connect to server. Make sure backend is running on port 3000.', true);
            }
        }

        async function handleSignup() {
            const data = {
                name: document.getElementById('signupName').value,
                age: document.getElementById('signupAge').value,
                gender: document.getElementById('signupGender').value,
                email: document.getElementById('signupEmail').value,
                password: document.getElementById('signupPassword').value,
                phone: document.getElementById('signupPhone').value,
                address: document.getElementById('signupAddress').value,
                aadhaar: document.getElementById('signupAadhaar').value
            };

            if (!data.name || !data.age || !data.gender || !data.email || !data.password || !data.phone || !data.address || !data.aadhaar) {
                showMsg('signupMsg', 'Please fill all fields', true);
                return;
            }

            try {
                const response = await fetch(`${API_URL}/signup`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    showMsg('signupMsg', 'Signup successful! Please login.');
                    setTimeout(() => switchAuthForm('login'), 2000);
                } else {
                    showMsg('signupMsg', result.error, true);
                }
            } catch (error) {
                showMsg('signupMsg', 'Cannot connect to server', true);
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('udaanUser');
            updateAuthUI();
            showHome();
        }

        async function submitReport() {
            if (!currentUser) {
                alert('Please login first');
                return;
            }

            const category = document.getElementById('reportCategory').value;
            const description = document.getElementById('reportDescription').value;

            if (!category || !description) {
                showMsg('reportMsg', 'Please fill all fields', true);
                return;
            }

            try {
                const response = await fetch(`${API_URL}/reports`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ category, description, email: currentUser.email })
                });

                const data = await response.json();

                if (response.ok) {
                    showMsg('reportMsg', `Report submitted! Your Case ID is: ${data.caseId}`);
                    document.getElementById('reportCategory').value = '';
                    document.getElementById('reportDescription').value = '';
                } else {
                    showMsg('reportMsg', data.error, true);
                }
            } catch (error) {
                showMsg('reportMsg', 'Cannot connect to server', true);
            }
        }

        async function submitStory() {
            if (!currentUser) {
                alert('Please login first');
                return;
            }

            const story = document.getElementById('storyContent').value;

            if (!story) {
                showMsg('storyMsg', 'Please write your story', true);
                return;
            }

            try {
                const response = await fetch(`${API_URL}/stories`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ story, email: currentUser.email })
                });

                if (response.ok) {
                    showMsg('storyMsg', 'Story submitted successfully!');
                    document.getElementById('storyContent').value = '';
                } else {
                    showMsg('storyMsg', 'Error submitting story', true);
                }
            } catch (error) {
                showMsg('storyMsg', 'Cannot connect to server', true);
            }
        }

        async function trackCase() {
            const caseId = document.getElementById('caseIdInput').value;

            if (!caseId) {
                document.getElementById('caseResult').innerHTML = '<p style="color: red; margin-top: 1rem;">Please enter a Case ID</p>';
                return;
            }

            try {
                const response = await fetch(`${API_URL}/case/${caseId}`);

                if (response.ok) {
                    const caseData = await response.json();
                    document.getElementById('caseResult').innerHTML = `
                        <div class="post-card" style="margin-top: 1.5rem;">
                            <h3>Case ID: ${caseId}</h3>
                            <p><strong>Status:</strong> ${caseData.status}</p>
                            <p><strong>Category:</strong> ${caseData.category}</p>
                            <p><strong>Description:</strong> ${caseData.description}</p>
                            <p><strong>Submitted:</strong> ${new Date(caseData.timestamp).toLocaleString()}</p>
                        </div>
                    `;
                } else {
                    document.getElementById('caseResult').innerHTML = '<p style="color: red; margin-top: 1rem;">Case not found</p>';
                }
            } catch (error) {
                document.getElementById('caseResult').innerHTML = '<p style="color: red; margin-top: 1rem;">Error tracking case</p>';
            }
        }

        async function loadMySubmissions() {
            if (!currentUser) return;

            try {
                const reportsRes = await fetch(`${API_URL}/reports/${currentUser.email}`);
                const reports = await reportsRes.json();

                const storiesRes = await fetch(`${API_URL}/stories/${currentUser.email}`);
                const stories = await storiesRes.json();

                const content = document.getElementById('subModuleContent');
                content.innerHTML = `
                    <h2>My Submissions</h2>
                    <h3 style="margin-top: 2rem;">My Reports</h3>
                    ${reports.length > 0 ? reports.map(r => `
                        <div class="post-card">
                            <h4>Case ID: ${r.case_id}</h4>
                            <p><strong>Category:</strong> ${r.category}</p>
                            <p><strong>Status:</strong> ${r.status}</p>
                            <p>${r.description}</p>
                            <small>${new Date(r.timestamp).toLocaleString()}</small>
                        </div>
                    `).join('') : '<p>No reports submitted yet</p>'}
                    
                    <h3 style="margin-top: 2rem;">My Stories</h3>
                    ${stories.length > 0 ? stories.map(s => `
                        <div class="post-card">
                            <p>${s.story}</p>
                            <small>${new Date(s.timestamp).toLocaleString()}</small>
                        </div>
                    `).join('') : '<p>No stories uploaded yet</p>'}
                `;

                document.getElementById('subModuleModal').style.display = 'flex';
            } catch (error) {
                alert('Error loading submissions');
            }
        }

        async function loadForumPosts() {
            try {
                const response = await fetch(`${API_URL}/forum/posts`);
                const posts = await response.json();

                const container = document.getElementById('forumPosts');
                container.innerHTML = posts.map(post => `
                    <div class="post-card">
                        <div class="post-header">
                            <div>
                                <h3>${post.title}</h3>
                                <small>${post.user_email} - ${new Date(post.timestamp).toLocaleDateString()}</small>
                            </div>
                            <div style="font-size: 1.2rem;">‚ù§Ô∏è ${post.like_count || 0}</div>
                        </div>
                        <p>${post.content}</p>
                        <button class="action-btn" onclick="likePost(${post.id})">Like</button>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading posts:', error);
                document.getElementById('forumPosts').innerHTML = '<p style="padding: 2rem; text-align: center; color: #666;">Unable to load posts. Make sure the backend server is running.</p>';
            }
        }

        async function submitForumPost() {
            if (!currentUser) {
                alert('Please login first');
                return;
            }

            const title = document.getElementById('forumTitle').value;
            const content = document.getElementById('forumContent').value;

            if (!title || !content) {
                showMsg('forumMsg', 'Please fill all fields', true);
                return;
            }

            try {
                const response = await fetch(`${API_URL}/forum/posts`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ title, content, user_email: currentUser.email })
                });

                if (response.ok) {
                    showMsg('forumMsg', 'Post created successfully!');
                    document.getElementById('forumTitle').value = '';
                    document.getElementById('forumContent').value = '';
                    loadForumPosts();
                } else {
                    showMsg('forumMsg', 'Error creating post', true);
                }
            } catch (error) {
                showMsg('forumMsg', 'Cannot connect to server', true);
            }
        }

        async function likePost(postId) {
            if (!currentUser) return;

            try {
                await fetch(`${API_URL}/forum/like`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ post_id: postId, user_email: currentUser.email })
                });
                loadForumPosts();
            } catch (error) {
                console.error('Error liking post:', error);
            }
        }
        function openHealthTips() {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            content.innerHTML = `
                <h2>Health Tips & Resources</h2>
                <p style="color: #666; margin-bottom: 2rem;">Access reliable health information, mental wellness tips, and medical support services.</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <h3 style="color: #5d4e37; margin-top: 1rem;">üß† Mental Health Resources</h3>
                    
                    <a href="https://www.nimhans.ac.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè• NIMHANS - National Mental Health Institute<br>
                        <small style="opacity: 0.8;">Mental health services and information</small>
                    </a>
                    
                    <a href="https://www.thelivelovelaughfoundation.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üíö Live Love Laugh Foundation<br>
                        <small style="opacity: 0.8;">Mental health awareness & support</small>
                    </a>
                    
                    <a href="https://www.who.int/health-topics/mental-health" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üåç WHO Mental Health Resources<br>
                        <small style="opacity: 0.8;">Global mental health guidelines</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üè• General Health & Wellness</h3>
                    
                    <a href="https://www.mohfw.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üèõÔ∏è Ministry of Health & Family Welfare<br>
                        <small style="opacity: 0.8;">Official health policies and programs</small>
                    </a>
                    
                    <a href="https://www.nhp.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìã National Health Portal<br>
                        <small style="opacity: 0.8;">Health information in multiple languages</small>
                    </a>
                    
                    <a href="https://esanjeevani.mohfw.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üíª eSanjeevani - Telemedicine<br>
                        <small style="opacity: 0.8;">Free online doctor consultation</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üë© Women's Health</h3>
                    
                    <a href="https://nhm.gov.in/index1.php?lang=1&level=3&sublinkid=818&lid=221" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ü§∞ Maternal & Child Health Services<br>
                        <small style="opacity: 0.8;">Pregnancy care and child health</small>
                    </a>
                    
                    <a href="https://www.who.int/health-topics/maternal-health" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üíó Women's Health Information<br>
                        <small style="opacity: 0.8;">Comprehensive women's health guide</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">‚òéÔ∏è Emergency Helplines</h3>
                    
                    <div class="menu-btn" style="background: #fff3cd; border-left: 4px solid #ffc107;">
                        üÜò <strong>Emergency Numbers</strong><br>
                        <small style="opacity: 0.9;">
                            ‚Ä¢ Ambulance: 102 / 108<br>
                            ‚Ä¢ Mental Health Helpline: 08046110007<br>
                            ‚Ä¢ National Helpline: 9152987821<br>
                            ‚Ä¢ Women Helpline: 181
                        </small>
                    </div>
                </div>
                
                <p style="margin-top: 2rem; padding: 1rem; background: #f5f3f0; border-radius: 8px; color: #666;">
                    üí° <strong>Important:</strong> For medical emergencies, always call emergency services immediately. These resources are for information and support only.
                </p>
            `;

            modal.style.display = 'flex';
        }

        function openEducationalResources() {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            content.innerHTML = `
                <h2>Educational Resources</h2>
                <p style="color: #666; margin-bottom: 2rem;">Access free educational platforms, courses, and learning materials for skill development.</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <h3 style="color: #5d4e37; margin-top: 1rem;">üìö Free Online Learning Platforms</h3>
                    
                    <a href="https://www.swayam.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üéì SWAYAM - Free Online Courses<br>
                        <small style="opacity: 0.8;">Government's online learning platform with certificates</small>
                    </a>
                    
                    <a href="https://nptel.ac.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìñ NPTEL - Technical Education<br>
                        <small style="opacity: 0.8;">Engineering, science & humanities courses</small>
                    </a>
                    
                    <a href="https://diksha.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üì± DIKSHA - Digital Learning<br>
                        <small style="opacity: 0.8;">School education content for all classes</small>
                    </a>
                    
                    <a href="https://www.khanacademy.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üåü Khan Academy<br>
                        <small style="opacity: 0.8;">Free courses in math, science & more</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üíº Skill Development & Vocational Training</h3>
                    
                    <a href="https://www.skillindiadigital.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üõ†Ô∏è Skill India Digital<br>
                        <small style="opacity: 0.8;">Free skill training & certification</small>
                    </a>
                    
                    <a href="https://www.pmkvyofficial.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìú Pradhan Mantri Kaushal Vikas Yojana<br>
                        <small style="opacity: 0.8;">Vocational training & placement support</small>
                    </a>
                    
                    <a href="https://nios.ac.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè´ NIOS - Open Schooling<br>
                        <small style="opacity: 0.8;">Complete school education at your pace</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üë©‚Äçüíº Women's Education & Empowerment</h3>
                    
                    <a href="https://wcd.nic.in/schemes/support-training-and-employment-programme-women-step" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí™ STEP - Women's Skill Training<br>
                        <small style="opacity: 0.8;">Support for women in traditional sectors</small>
                    </a>
                    
                    <a href="https://www.ncw.nic.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ‚öñÔ∏è National Commission for Women<br>
                        <small style="opacity: 0.8;">Women's rights & education resources</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üìñ Language Learning</h3>
                    
                    <a href="https://www.duolingo.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üó£Ô∏è Duolingo - Learn Languages<br>
                        <small style="opacity: 0.8;">Free language learning app</small>
                    </a>
                    
                    <a href="https://spoken-tutorial.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí¨ Spoken Tutorial - Indian Languages<br>
                        <small style="opacity: 0.8;">Learn software in your language</small>
                    </a>
                </div>
                
                <p style="margin-top: 2rem; padding: 1rem; background: #f5f3f0; border-radius: 8px; color: #666;">
                    üí° <strong>Tip:</strong> Most of these platforms offer free courses with certificates. Start with one course and build your skills gradually!
                </p>
            `;

            modal.style.display = 'flex';
        }

        function openDigitalLiteracy() {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            content.innerHTML = `
                <h2>Digital Literacy Programs</h2>
                <p style="color: #666; margin-bottom: 2rem;">Learn basic to advanced digital skills, internet safety, and technology usage.</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <h3 style="color: #5d4e37; margin-top: 1rem;">üíª Government Digital Literacy Programs</h3>
                    
                    <a href="https://www.digitalindia.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üáÆüá≥ Digital India Initiative<br>
                        <small style="opacity: 0.8;">Government's digital transformation program</small>
                    </a>
                    
                    <a href="https://www.pmgdisha.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üì± PMGDISHA - Digital Literacy Mission<br>
                        <small style="opacity: 0.8;">Free digital literacy training & certification</small>
                    </a>
                    
                    <a href="https://csc.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè¢ Common Service Centers<br>
                        <small style="opacity: 0.8;">Digital services & training centers near you</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üéì Learn Computer Skills</h3>
                    
                    <a href="https://www.gcfglobal.org/topics/computer-basics/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üñ•Ô∏è Computer Basics for Beginners<br>
                        <small style="opacity: 0.8;">Learn how to use computers from scratch</small>
                    </a>
                    
                    <a href="https://learndigital.withgoogle.com/digitalunlocked" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üîì Google Digital Unlocked<br>
                        <small style="opacity: 0.8;">Free digital marketing & online skills</small>
                    </a>
                    
                    <a href="https://www.microsoft.com/en-in/digital-literacy" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ü™ü Microsoft Digital Literacy<br>
                        <small style="opacity: 0.8;">Learn Microsoft Office & digital skills</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üì± Mobile & Internet Usage</h3>
                    
                    <a href="https://www.youtube.com/user/GoogleIndiaOfficial" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üì∫ Google India - Learn Online<br>
                        <small style="opacity: 0.8;">Video tutorials in Hindi & regional languages</small>
                    </a>
                    
                    <a href="https://beinternetawesome.withgoogle.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üõ°Ô∏è Internet Safety & Security<br>
                        <small style="opacity: 0.8;">Stay safe online - cybersecurity basics</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üè¶ Digital Payments & Banking</h3>
                    
                    <a href="https://www.rbi.org.in/financialeducation/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí≥ RBI Financial Education<br>
                        <small style="opacity: 0.8;">Learn digital banking & online payments</small>
                    </a>
                    
                    <a href="https://www.npci.org.in/what-we-do/upi/upi-ecosystem" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí∏ Learn UPI & Digital Payments<br>
                        <small style="opacity: 0.8;">How to use Google Pay, PhonePe, Paytm safely</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üîê Online Safety Tips</h3>
                    
                    <div class="menu-btn" style="background: #fff3cd; border-left: 4px solid #ffc107;">
                        ‚ö†Ô∏è <strong>Stay Safe Online</strong><br>
                        <small style="opacity: 0.9;">
                            ‚Ä¢ Never share OTP or passwords<br>
                            ‚Ä¢ Verify sender before clicking links<br>
                            ‚Ä¢ Use strong, unique passwords<br>
                            ‚Ä¢ Enable two-factor authentication<br>
                            ‚Ä¢ Report cybercrime: cybercrime.gov.in
                        </small>
                    </div>
                </div>
                
                <p style="margin-top: 2rem; padding: 1rem; background: #f5f3f0; border-radius: 8px; color: #666;">
                    üí° <strong>Remember:</strong> Digital literacy is essential in today's world. Start with basics and gradually build your confidence!
                </p>
            `;

            modal.style.display = 'flex';
        }

        function openTrainingOpportunities() {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            content.innerHTML = `
                <h2>Training Opportunities</h2>
                <p style="color: #666; margin-bottom: 2rem;">Explore free and paid training programs, skill development courses, and employment opportunities.</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <h3 style="color: #5d4e37; margin-top: 1rem;">üéì Government Skill Training Programs</h3>
                    
                    <a href="https://www.skillindiadigital.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üáÆüá≥ Skill India Mission<br>
                        <small style="opacity: 0.8;">National skill development programs</small>
                    </a>
                    
                    <a href="https://www.pmkvyofficial.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìú PMKVY - Free Skill Training<br>
                        <small style="opacity: 0.8;">Get trained & certified for free with placement support</small>
                    </a>
                    
                    <a href="https://rural.nic.in/en/press-release/deen-dayal-upadhyaya-grameen-kaushalya-yojana-ddu-gky" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üåæ DDU-GKY - Rural Skill Training<br>
                        <small style="opacity: 0.8;">Training for rural youth with 100% placement</small>
                    </a>
                    
                    <a href="https://www.ncs.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üíº National Career Service Portal<br>
                        <small style="opacity: 0.8;">Job search, training & career counseling</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üë©‚Äçüíº Women-Focused Training Programs</h3>
                    
                    <a href="https://wcd.nic.in/schemes/support-training-and-employment-programme-women-step" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí™ STEP - Women's Employment Program<br>
                        <small style="opacity: 0.8;">Training in traditional & non-traditional sectors</small>
                    </a>
                    
                    <a href="https://nrlm.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üë≠ Women's Livelihood Training<br>
                        <small style="opacity: 0.8;">Self-employment & entrepreneurship training</small>
                    </a>
                    
                    <a href="https://www.sidbi.in/en/stand-up-india-scheme" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üöÄ Stand Up India - Women Entrepreneurs<br>
                        <small style="opacity: 0.8;">Business loans for women & SC/ST entrepreneurs</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üíª IT & Technology Training</h3>
                    
                    <a href="https://nasscomfutureskills.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üñ•Ô∏è NASSCOM FutureSkills<br>
                        <small style="opacity: 0.8;">Digital skills & IT certification programs</small>
                    </a>
                    
                    <a href="https://www.microsoft.com/en-in/training-certifications" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ü™ü Microsoft Training & Certification<br>
                        <small style="opacity: 0.8;">IT professional certifications</small>
                    </a>
                    
                    <a href="https://www.coursera.org/browse/computer-science" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìö Coursera - Tech Courses<br>
                        <small style="opacity: 0.8;">Free & paid courses from top universities</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üè≠ Vocational & Trade Skills</h3>
                    
                    <a href="https://iti.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üîß Industrial Training Institutes (ITI)<br>
                        <small style="opacity: 0.8;">Technical & vocational training courses</small>
                    </a>
                    
                    <a href="https://www.nimi.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üõ†Ô∏è NIMI - Trade Courses<br>
                        <small style="opacity: 0.8;">Apprenticeship & skill training</small>
                    </a>
                    
                    <a href="https://www.pmkvy.in/TrainingPartner/SearchTP.aspx" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè¢ Find Training Centers Near You<br>
                        <small style="opacity: 0.8;">Locate PMKVY training centers in your area</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üí° Entrepreneurship & Business Training</h3>
                    
                    <a href="https://www.mudra.org.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí∞ MUDRA Yojana - Business Loans<br>
                        <small style="opacity: 0.8;">Micro-financing for small businesses</small>
                    </a>
                    
                    <a href="https://msme.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè™ MSME Support & Training<br>
                        <small style="opacity: 0.8;">Start & grow your small business</small>
                    </a>
                    
                    <a href="https://www.startupindia.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üöÄ Startup India<br>
                        <small style="opacity: 0.8;">Resources for new entrepreneurs</small>
                    </a>
                </div>
                
                <p style="margin-top: 2rem; padding: 1rem; background: #f5f3f0; border-radius: 8px; color: #666;">
                    üí° <strong>Action Steps:</strong> 1) Choose a skill you're interested in 2) Enroll in free training 3) Complete certification 4) Apply for jobs or start your business!
                </p>
            `;

            modal.style.display = 'flex';
        }

        function openSchemes() {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            content.innerHTML = `
                <h2>Government Schemes for Welfare & Empowerment</h2>
                <p style="color: #666; margin-bottom: 2rem;">Access various government schemes designed for women empowerment, rural development, mental health support, and social welfare.</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <h3 style="color: #5d4e37; margin-top: 1rem;">üë© Women Empowerment Schemes</h3>
                    
                    <a href="https://wcd.nic.in/beti-bachao-beti-padhao-scheme" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üëß Beti Bachao Beti Padhao<br>
                        <small style="opacity: 0.8;">Education & welfare for girl child</small>
                    </a>
                    
                    <a href="https://www.indiacode.nic.in/handle/123456789/2155?sam_handle=123456789/1362" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ‚öñÔ∏è Protection of Women from Domestic Violence Act<br>
                        <small style="opacity: 0.8;">Legal protection and support for women</small>
                    </a>
                    
                    <a href="https://nari.nic.in/schemes/one-stop-centre-scheme" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üõ°Ô∏è One Stop Centre Scheme (Sakhi)<br>
                        <small style="opacity: 0.8;">Integrated support for women in distress</small>
                    </a>
                    
                    <a href="https://wcd.nic.in/schemes/mahila-shakti-kendras-msk" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí™ Mahila Shakti Kendra<br>
                        <small style="opacity: 0.8;">Women empowerment & skill development</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üåæ Rural Development Schemes</h3>
                    
                    <a href="https://pmay-g.nic.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè† Pradhan Mantri Awas Yojana - Gramin<br>
                        <small style="opacity: 0.8;">Housing for rural poor</small>
                    </a>
                    
                    <a href="https://nrlm.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üíº National Rural Livelihood Mission (NRLM)<br>
                        <small style="opacity: 0.8;">Employment & livelihood for rural families</small>
                    </a>
                    
                    <a href="https://rural.nic.in/en/press-release/deen-dayal-upadhyaya-grameen-kaushalya-yojana-ddu-gky" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üéì DDU Grameen Kaushalya Yojana<br>
                        <small style="opacity: 0.8;">Skill training for rural youth</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üè• Health & Wellness Schemes</h3>
                    
                    <a href="https://www.pmjay.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üíö Ayushman Bharat - Pradhan Mantri Jan Arogya Yojana<br>
                        <small style="opacity: 0.8;">Free health insurance up to ‚Çπ5 lakh</small>
                    </a>
                    
                    <a href="https://nhm.gov.in/index1.php?lang=1&level=2&sublinkid=819&lid=221" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ü§∞ Pradhan Mantri Matru Vandana Yojana<br>
                        <small style="opacity: 0.8;">Maternity benefit for pregnant & lactating women</small>
                    </a>
                    
                    <a href="https://www.nhp.gov.in/national-mental-health-programme_pg" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üß† National Mental Health Programme<br>
                        <small style="opacity: 0.8;">Mental health services & awareness</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üõ°Ô∏è Social Security & Support</h3>
                    
                    <a href="https://socialjustice.gov.in/schemes/19" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí∞ Support to Training and Employment Programme<br>
                        <small style="opacity: 0.8;">Rehabilitation support for addiction recovery</small>
                    </a>
                    
                    <a href="https://www.indiacode.nic.in/handle/123456789/2079?sam_handle=123456789/1362" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üë®‚Äçüë©‚Äçüëß Domestic Violence Helpline (181)<br>
                        <small style="opacity: 0.8;">24/7 emergency helpline for women in distress</small>
                    </a>
                    
                    <a href="https://www.digitalindia.gov.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üì± Digital India Programme<br>
                        <small style="opacity: 0.8;">Digital literacy & empowerment</small>
                    </a>
                    
                    <a href="https://pib.gov.in/PressReleasePage.aspx?PRID=1697858" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìö National Education Policy 2020<br>
                        <small style="opacity: 0.8;">Education & skill development initiatives</small>
                    </a>
                </div>
                
                <p style="margin-top: 2rem; padding: 1rem; background: #f5f3f0; border-radius: 8px; color: #666;">
                    üí° <strong>Note:</strong> These schemes are regularly updated by the government. For eligibility criteria, application process, and latest information, please visit the official websites or contact your local government office.
                </p>
            `;

            modal.style.display = 'flex';
        }
        function openProgressTracker() {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            content.innerHTML = `
                <h2>üìà Progress Tracker - Your Recovery Journey</h2>
                <p style="color: #666; margin-bottom: 2rem;">Track your progress, celebrate milestones, and stay motivated on your path to recovery.</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <h3 style="color: #5d4e37; margin-top: 1rem;">üéØ Recovery Tracking Tools</h3>
                    
                    <a href="https://www.recoveryrecord.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üì± Recovery Record App<br>
                        <small style="opacity: 0.8;">Track meals, moods, and recovery goals</small>
                    </a>
                    
                    <a href="https://www.sobertime.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ‚è∞ Sober Time Counter<br>
                        <small style="opacity: 0.8;">Count days sober and track milestones</small>
                    </a>
                    
                    <a href="https://www.intherooms.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üåê In The Rooms - Recovery Tracker<br>
                        <small style="opacity: 0.8;">Online recovery community with tracking tools</small>
                    </a>
                    
                    <a href="https://www.recoveryelevator.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üéß Recovery Elevator<br>
                        <small style="opacity: 0.8;">Podcast & community for alcohol-free living</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üìä Self-Monitoring Resources</h3>
                    
                    <a href="https://www.smartrecovery.org/smart-recovery-toolbox/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üß∞ SMART Recovery Toolbox<br>
                        <small style="opacity: 0.8;">Tools for managing cravings and tracking progress</small>
                    </a>
                    
                    <a href="https://www.verywellmind.com/addiction-recovery-4157285" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìö Recovery Education & Tips<br>
                        <small style="opacity: 0.8;">Evidence-based recovery information</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">‚úÖ Daily Check-In & Journaling</h3>
                    
                    <div class="menu-btn" style="background: #fff3cd; border-left: 4px solid #ffc107;">
                        üìù <strong>Create Your Own Progress Journal</strong><br>
                        <small style="opacity: 0.9;">
                            Track daily:<br>
                            ‚Ä¢ Days clean/sober<br>
                            ‚Ä¢ Triggers you overcame<br>
                            ‚Ä¢ Positive changes you notice<br>
                            ‚Ä¢ Goals for tomorrow<br>
                            ‚Ä¢ Gratitude list
                        </small>
                    </div>
                    
                    <a href="https://www.recoveryanswers.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üîç Recovery Research & Resources<br>
                        <small style="opacity: 0.8;">Science-based recovery information</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üèÜ Celebrate Your Milestones</h3>
                    
                    <div class="menu-btn" style="background: #d4edda; border-left: 4px solid #28a745;">
                        üéâ <strong>Recovery Milestones to Celebrate</strong><br>
                        <small style="opacity: 0.9;">
                            ‚Ä¢ 24 hours clean<br>
                            ‚Ä¢ 1 week sober<br>
                            ‚Ä¢ 30 days milestone<br>
                            ‚Ä¢ 90 days (3 months)<br>
                            ‚Ä¢ 6 months<br>
                            ‚Ä¢ 1 year anniversary<br>
                            <br>
                            Every day counts! Be proud of your progress. üí™
                        </small>
                    </div>
                </div>
                
                <p style="margin-top: 2rem; padding: 1rem; background: #f5f3f0; border-radius: 8px; color: #666;">
                    üí° <strong>Remember:</strong> Recovery is not linear. Celebrate small wins, learn from setbacks, and keep moving forward. You're doing great! üíö
                </p>
            `;

            modal.style.display = 'flex';
        }

        function openSupportGroups() {
            const modal = document.getElementById('subModuleModal');
            const content = document.getElementById('subModuleContent');

            content.innerHTML = `
                <h2>üë• Peer Support Groups</h2>
                <p style="color: #666; margin-bottom: 2rem;">Connect with others who understand your journey. You're not alone in recovery.</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <h3 style="color: #5d4e37; margin-top: 1rem;">üåç International Support Groups</h3>
                    
                    <a href="https://www.aa.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üç∫ Alcoholics Anonymous (AA)<br>
                        <small style="opacity: 0.8;">World's largest support group for alcohol addiction</small>
                    </a>
                    
                    <a href="https://www.na.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üíä Narcotics Anonymous (NA)<br>
                        <small style="opacity: 0.8;">Support for drug addiction recovery</small>
                    </a>
                    
                    <a href="https://www.smartrecovery.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üß† SMART Recovery<br>
                        <small style="opacity: 0.8;">Science-based addiction recovery support</small>
                    </a>
                    
                    <a href="https://al-anon.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üë®‚Äçüë©‚Äçüëß Al-Anon Family Groups<br>
                        <small style="opacity: 0.8;">Support for families & friends of alcoholics</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üáÆüá≥ India-Specific Support Groups</h3>
                    
                    <a href="https://www.alcoholicsanonymous.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üèõÔ∏è AA India - Find Local Meetings<br>
                        <small style="opacity: 0.8;">AA meetings across India</small>
                    </a>
                    
                    <a href="https://naindia.in/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üáÆüá≥ Narcotics Anonymous India<br>
                        <small style="opacity: 0.8;">NA meetings in Indian cities</small>
                    </a>
                    
                    <div class="menu-btn" style="background: #e8f4f8; border-left: 4px solid #17a2b8;">
                        üìû <strong>India Helplines</strong><br>
                        <small style="opacity: 0.9;">
                            ‚Ä¢ National Drug Helpline: 1800-11-0031<br>
                            ‚Ä¢ NIMHANS Helpline: 080-46110007<br>
                            ‚Ä¢ T.T. Ranganathan Clinical Research Foundation: 044-24640369
                        </small>
                    </div>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üíª Online Support Communities</h3>
                    
                    <a href="https://www.intherooms.com/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üåê In The Rooms<br>
                        <small style="opacity: 0.8;">Free 24/7 online recovery meetings</small>
                    </a>
                    
                    <a href="https://www.reddit.com/r/stopdrinking/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üí¨ r/stopdrinking (Reddit)<br>
                        <small style="opacity: 0.8;">Supportive community for quitting alcohol</small>
                    </a>
                    
                    <a href="https://www.reddit.com/r/REDDITORSINRECOVERY/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        ü§ù Redditors in Recovery<br>
                        <small style="opacity: 0.8;">General addiction recovery community</small>
                    </a>
                    
                    <a href="https://www.recoveryanswers.org/recovery-101/recovery-support/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üìñ Recovery Support Resources<br>
                        <small style="opacity: 0.8;">Comprehensive guide to finding support</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üè• Professional Support Centers</h3>
                    
                    <a href="https://nimhans.ac.in/centre-for-addiction-medicine/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè• NIMHANS Addiction Medicine Centre<br>
                        <small style="opacity: 0.8;">Bangalore - Expert addiction treatment</small>
                    </a>
                    
                    <a href="https://www.ttranganathan.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè• T.T. Ranganathan Centre, Chennai<br>
                        <small style="opacity: 0.8;">Rehabilitation & counseling services</small>
                    </a>
                    
                    <a href="https://www.ashaadhaar.org/" target="_blank" class="menu-btn" style="text-decoration: none;">
                        üè• Ashaadhaar Foundation, Mumbai<br>
                        <small style="opacity: 0.8;">De-addiction & rehabilitation</small>
                    </a>
                    
                    <h3 style="color: #5d4e37; margin-top: 1.5rem;">üì± Support Apps & Hotlines</h3>
                    
                    <div class="menu-btn" style="background: #fff3cd; border-left: 4px solid #ffc107;">
                        üÜò <strong>Immediate Help Available</strong><br>
                        <small style="opacity: 0.9;">
                            ‚Ä¢ UDAAN-X Helpline: 1452 235 1463<br>
                            ‚Ä¢ Mental Health Helpline: 9152987821<br>
                            ‚Ä¢ Available 24/7 for crisis support
                        </small>
                    </div>
                </div>
                
                <p style="margin-top: 2rem; padding: 1rem; background: #f5f3f0; border-radius: 8px; color: #666;">
                    üíö <strong>You are not alone:</strong> Millions of people are in recovery. Support groups provide understanding, hope, and proven strategies. Take the first step today!
                </p>
            `;

            modal.style.display = 'flex';
        }

        // Suggestions data
const suggestions = {
    'worthless': 'üåü Remember that your worth is not defined by productivity. You are valuable simply for being you. Consider practicing self-compassion and speaking to yourself as you would to a good friend.',
    'physical': 'üí™ Physical symptoms can be related to stress. Try some light stretching, take a short walk, or practice deep breathing exercises. If symptoms persist, please consult a healthcare provider.',
    'memories': 'üßò Intrusive thoughts about the past are common with stress. Practice grounding techniques like the 5-4-3-2-1 method (5 things you see, 4 you hear, 3 you touch, 2 you smell, 1 you taste). Focus on what you can control in the present moment.',
    'motivation': 'üéØ Loss of motivation is a common sign of stress or burnout. Break tasks into smaller, manageable steps. Start with just 5 minutes of one activity. Celebrate small wins along the way.',
    'relationships': 'ü§ù Isolation can worsen stress. Consider reaching out to one trusted person, even briefly. A simple text or call can help. Support groups are also available if you prefer.',
    'default': 'üíö Please consider speaking with a mental health professional who can provide personalized support and guidance tailored to your specific situation.'
};

function showSuggestion(type) {
    console.log('showSuggestion called with type:', type);
    
    // Get the modal and content elements
    const modal = document.getElementById('suggestionModal');
    const content = document.getElementById('suggestionContent');
    
    // Check if elements exist
    if (!modal) {
        console.error('suggestionModal not found!');
        return;
    }
    
    if (!content) {
        console.error('suggestionContent not found!');
        return;
    }
    
    // Set the content
    content.innerHTML = suggestions[type] || suggestions['default'];
    
    // Show the modal
    modal.style.display = 'flex';
    
    console.log('Modal should be visible now');
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = 'none';
    }
}

        window.onclick = function (event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
        // ========== ANIMATED AUTH FUNCTIONS ==========

        function openAnimatedAuth() {
            document.getElementById('animatedAuthContainer').classList.add('active');
        }

        function closeAnimatedAuth() {
            document.getElementById('animatedAuthContainer').classList.remove('active');
        }

        function toggleAnimatedForm() {
            document.getElementById('authBoxContainer').classList.toggle('active');
        }

        // Close on outside click
        document.getElementById('animatedAuthContainer')?.addEventListener('click', function (e) {
            if (e.target === this) {
                closeAnimatedAuth();
            }
        });

        async function handleAnimatedLogin() {
            const email = document.getElementById('animLoginUser').value.trim();
            const password = document.getElementById('animLoginPass').value.trim();

            if (!email || !password) {
                alert('Please fill all fields');
                return;
            }

            try {
                const response = await fetch('http://localhost:3000/api/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await response.json();

                if (response.ok) {
                    currentUser = data.user;
                    localStorage.setItem('udaanUser', JSON.stringify(currentUser));
                    alert('Login successful! ‚úÖ');
                    updateAuthUI();
                    closeAnimatedAuth();
                } else {
                    alert(data.error || 'Invalid credentials ‚ùå');
                }
            } catch (error) {
                // Demo mode if backend not running
                console.log('Backend not available, using demo mode');
                currentUser = {
                    name: email.split('@')[0] || email,
                    email: email
                };
                localStorage.setItem('udaanUser', JSON.stringify(currentUser));
                alert('Login successful! ‚úÖ (Demo mode - backend not connected)');
                updateAuthUI();
                closeAnimatedAuth();
            }
        }

        async function handleAnimatedSignup() {
            const data = {
                name: document.getElementById('animSignupName').value.trim(),
                age: document.getElementById('animSignupAge').value,
                gender: document.getElementById('animSignupGender').value,
                email: document.getElementById('animSignupEmail').value.trim(),
                password: document.getElementById('animSignupPass').value.trim(),
                phone: document.getElementById('animSignupPhone').value.trim(),
                address: document.getElementById('animSignupAddress').value.trim(),
                aadhaar: document.getElementById('animSignupAadhaar').value.trim()
            };

            // Validation
            if (!data.name || !data.age || !data.gender || !data.email || !data.password || !data.phone || !data.address || !data.aadhaar) {
                alert('Please fill all fields ‚ö†Ô∏è');
                return;
            }

            if (data.aadhaar.length !== 12) {
                alert('Aadhaar number must be 12 digits ‚ö†Ô∏è');
                return;
            }

            try {
                const response = await fetch('http://localhost:3000/api/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Signup successful! ‚úÖ Please login now.');
                    toggleAnimatedForm(); // Switch to login form
                    // Clear signup form
                    document.getElementById('animSignupName').value = '';
                    document.getElementById('animSignupAge').value = '';
                    document.getElementById('animSignupGender').value = '';
                    document.getElementById('animSignupEmail').value = '';
                    document.getElementById('animSignupPass').value = '';
                    document.getElementById('animSignupPhone').value = '';
                    document.getElementById('animSignupAddress').value = '';
                    document.getElementById('animSignupAadhaar').value = '';
                } else {
                    alert(result.error || 'Error during signup ‚ùå');
                }
            } catch (error) {
                console.error('Signup error:', error);
                alert('Cannot connect to server. Make sure backend is running. ‚ö†Ô∏è');
            }
        }
    </script>
<!-- Firebase Auth Protection -->
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>
<script>
  // üß† Paste the SAME firebaseConfig here as in login.html
  const firebaseConfig = {
  apiKey: "AIzaSyD7JYW_XHNOVBPBd-s3lz_BE8G8DOJHqFo",
  authDomain: "udaan-x.firebaseapp.com",
  projectId: "udaan-x",
  storageBucket: "udaan-x.firebasestorage.app",
  messagingSenderId: "677119898115",
  appId: "1:677119898115:web:0e3a839cbd32bcbd191436",
  measurementId: "G-TWQ6WGVPQD"
};
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  // üö™ Redirect to login if not signed in
  auth.onAuthStateChanged(user => {
    if (!user) {
      window.location.href = "login.html"; // kick them out if not logged in
    } else {
      console.log("‚úÖ Logged in as:", user.email);
    }
  });

  // üì¥ Add this logout function for your logout button
  function logout() {
    auth.signOut().then(() => {
      window.location.href = "login.html";
    });
  }
</script>

</body>

</html>